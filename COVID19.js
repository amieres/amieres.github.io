function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6;a=self;b=a.FsRoot=a.FsRoot||{};c=b.Library=b.Library||{};d=c.Monads=c.Monads||{};e=d.Seq=d.Seq||{};f=d.Async=d.Async||{};g=c.String=c.String||{};h=c.ParseO=c.ParseO||{};i=b.TestingJS=b.TestingJS||{};j=i.Covid=i.Covid||{};k=a.WebSharper=a.WebSharper||{};l=k.Operators=k.Operators||{};m=k.Utils=k.Utils||{};n=k.Arrays=k.Arrays||{};o=k.Unchecked=k.Unchecked||{};p=k.Obj=k.Obj||{};q=k.Collections=k.Collections||{};r=q.Dictionary=q.Dictionary||{};s=k.CancellationTokenSource=k.CancellationTokenSource||{};t=k.UI=k.UI||{};u=t.Var$1=t.Var$1||{};v=t.Var=t.Var||{};w=t.View=t.View||{};x=a.StartupCode$testing$testing=a.StartupCode$testing$testing||{};y=k.Seq=k.Seq||{};z=k.List=k.List||{};A=z.T=z.T||{};B=k.Char=k.Char||{};C=k.Slice=k.Slice||{};D=k.Strings=k.Strings||{};E=q.Map=q.Map||{};F=a.FSharp=a.FSharp||{};G=F.Data=F.Data||{};H=G.Runtime=G.Runtime||{};I=H.IO=H.IO||{};J=q.FSharpMap=q.FSharpMap||{};K=t.AttrModule=t.AttrModule||{};L=t.HtmlModule=t.HtmlModule||{};M=L.attr=L.attr||{};N=t.Doc=t.Doc||{};O=a.EventTarget;P=a.Node;Q=k.JavaScript=k.JavaScript||{};R=Q.JS=Q.JS||{};S=Q.Pervasives=Q.Pervasives||{};T=a.Object;U=q.DictionaryUtil=q.DictionaryUtil||{};V=a.Error;W=k.AggregateException=k.AggregateException||{};X=k.Concurrency=k.Concurrency||{};Y=t.ConcreteVar=t.ConcreteVar||{};Z=t.Snap=t.Snap||{};_0=t.Abbrev=t.Abbrev||{};_1=_0.Async=_0.Async||{};_2=k.Numeric=k.Numeric||{};_3=a.System=a.System||{};_4=_3.Guid=_3.Guid||{};_5=k.Enumerator=k.Enumerator||{};_6=_5.T=_5.T||{};_7=k.Data=k.Data||{};_8=_7.TxtRuntime=_7.TxtRuntime||{};_9=_7.Pervasives=_7.Pervasives||{};_=q.MapUtil=q.MapUtil||{};$=t.AttrProxy=t.AttrProxy||{};ba=t.Array=t.Array||{};bb=t.Docs=t.Docs||{};bc=t.Client=t.Client||{};bd=bc.Templates=bc.Templates||{};be=a.WindowOrWorkerGlobalScope;bf=X.CT=X.CT||{};bg=X.AsyncBody=X.AsyncBody||{};bh=_0.Fresh=_0.Fresh||{};bi=k.DateUtil=k.DateUtil||{};bj=k.TimeoutException=k.TimeoutException||{};bk=q.BalancedTree=q.BalancedTree||{};bl=q.Pair=q.Pair||{};bm=bk.Tree=bk.Tree||{};bn=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bo=t.Attrs=t.Attrs||{};bp=t.DomUtility=t.DomUtility||{};bq=t.DocElemNode=t.DocElemNode||{};br=X.Scheduler=X.Scheduler||{};bs=k.OperationCanceledException=k.OperationCanceledException||{};bt=q.HashSet=q.HashSet||{};bu=a.CharacterData;bv=bc.Attrs=bc.Attrs||{};bw=bv.Dyn=bv.Dyn||{};bx=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};by=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bz=t.An=t.An||{};bA=bc.Settings=bc.Settings||{};bB=_0.Mailbox=_0.Mailbox||{};bC=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bD=t.Elt=t.Elt||{};bE=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bF=bd.Prepare=bd.Prepare||{};bG=q.KeyCollection=q.KeyCollection||{};bH=bc.Docs=bc.Docs||{};bI=bH.RunState=bH.RunState||{};bJ=bH.NodeSet=bH.NodeSet||{};bK=t.Anims=t.Anims||{};bL=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bM=k.FormatException=k.FormatException||{};bN=t.Updates=t.Updates||{};bO=t.DynamicAttrNode=t.DynamicAttrNode||{};bP=k.Queue=k.Queue||{};bQ=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bR=t.AppendList=t.AppendList||{};bS=t.Easing=t.Easing||{};bT=_0.HashSet=_0.HashSet||{};bU=q.HashSetUtil=q.HashSetUtil||{};bV=bH.DomNodes=bH.DomNodes||{};bW=k.Lazy=k.Lazy||{};bX=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bY=k.LazyExtensionsProxy=k.LazyExtensionsProxy||{};bZ=bY.LazyRecord=bY.LazyRecord||{};b0=a.console;b1=a.JSON;b2=a.IntelliFactory;b3=b2&&b2.Runtime;b4=a.Date;b5=a.jQuery;b6=a.Math;c.Error=function(b7){return{$:1,$0:b7};};c.print=function(b7){if(typeof b7=="string")((function(b8){return function(b9){return b8(m.toSafe(b9));};}(function(b8){b0.log(b8);}))(b7));else((function(b8){return function(b9){return b8(m.prettyPrint(b9));};}(function(b8){b0.log(b8);}))(b7));};c.delayedA=function(b7,b8){var b9;b9=null;return function(b_){var b$;b9==null?void 0:b9.$0.Cancel$1();b9={$:1,$0:new s.New()};X.Start((b$=null,X.Delay(function(){return X.Bind(X.Sleep(b7),function(){return X.Bind(b8(b_),function(){return X.Return(null);});});})),{$:1,$0:b9.$0});};};c.delayed=function(b7,b8){function b9(){return X.Return(null);}return c.delayedA(b7,function(b_){return b9(b8(b_));});};c.delayedVar=function(b7,b8){var b9,b_;b9=u.Create$1(b8.Get());b_=b8.get_View();w.Sink(c.delayed(b7,function(b$){b9.Set(b$);}),b_);return b9;};c["String.Substring2"]=function(b7,b8,b9){var b_,b$;while(true){if(b9<=0)return"";else if(b8>=b7.length)return"";else if(b8<0){b_=b8;b8=0;b9=b9+b_;}else return D.Substring(b7,b8,(b$=b7.length-b8,o.Compare(b9,b$)===-1?b9:b$));}};c["String.Left"]=function(b7,b8){return b8<0?c["String.Substring2"](b7,0,b7.length+b8):c["String.Substring2"](b7,0,b8);};c["String.Right"]=function(b7,b8){var b9,b_;return c["String.Substring2"](b7,(b9=0,(b_=b7.length-b8,o.Compare(b9,b_)===1?b9:b_)),b7.length);};c["String.get_toUnderscore"]=function(b7,b8){return n.ofSeq(y.collect(a.id,y.mapi(function(b9,b_){return b9>0&&B.IsUpper(b_)?z.ofArray(["_",b_]):z.ofArray([b_]);},b7))).join("");};e.rtn=function(){x.$cctor();return x.rtn;};e.insertO=function(b7){var b8;b8=b7==null?null:{$:1,$0:y.map(function(b9){return{$:1,$0:b9};},b7.$0)};return b8==null?(e.rtn())(null):b8.$0;};e.insertR=function(b7){return b7.$==0?y.map(function(b8){return{$:0,$0:b8};},b7.$0):(e.rtn())(c.Error(b7.$0));};e.absorbO=function(b7){return y.choose(a.id,b7);};e.absorbR=function(b7){return y.choose(function(b8){return b8.$==0?{$:1,$0:b8.$0}:null;},b7);};e.ofOption=function(b7){return b7==null?[]:[b7.$0];};f.apply=function(b7,b8){var b9;b9=null;return X.Delay(function(){return X.Bind(X.StartChild(b7,null),function(b_){return X.Bind(X.StartChild(b8,null),function(b$){return X.Bind(b_,function(ca){return X.Bind(b$,function(cb){return X.Return(ca(cb));});});});});});};f.sleepThen=function(b7,b8){var b9;b9=null;return X.Delay(function(){return X.Bind(X.Sleep(b8),function(){return X.Return(b7());});});};f.op_GreaterGreaterEquals=function(b7,b8){return X.Bind(b7,b8);};f.traverseSeq=function(b7,b8){function b9(b_){return X.Return(b_);}return X.Bind(n.foldBack(function(b_,b$){return f.op_GreaterGreaterEquals(b7(b_),function(ca){return f.op_GreaterGreaterEquals(b$,function(cb){return X.Return(new A({$:1,$0:ca,$1:cb}));});});},n.ofSeq(b8),X.Return(A.Empty)),function(b_){return b9(a.id(b_));});};f.sequenceSeq=function(b7){return f.traverseSeq(a.id,b7);};f.insertO=function(b7){var b8;function b9(b$){return{$:1,$0:b$};}function b_(b$){return X.Return(b$);}b8=b7==null?null:{$:1,$0:X.Bind(b7.$0,function(b$){return b_(b9(b$));})};return b8==null?X.Return(null):b8.$0;};f.insertR=function(b7){function b8(b_){return{$:0,$0:b_};}function b9(b_){return X.Return(b_);}return b7.$==0?X.Bind(b7.$0,function(b_){return b9(b8(b_));}):X.Return(c.Error(b7.$0));};g.splitByChar=function(b7,b8){return D.SplitChars(b8,[b7],0);};g.splitInTwoO=function(b7,b8){var b9;b9=b8.indexOf(b7);return b9===-1?null:{$:1,$0:[c["String.Left"](b8,b9),b8.substring(b9+b7.length)]};};g.delimitedO=function(b7,b8,b9){var b_,b$,ca,cb,cc;b_=g.splitInTwoO(b7,b9);return b_==null?null:(b$=b_.$0,(ca=b$[0],(cb=g.splitInTwoO(b8,b$[1]),cb==null?null:{$:1,$0:(cc=cb.$0,[ca,cc[0],cc[1]])})));};g.contains=function(b7,b8){return b8.indexOf(b7)!=-1;};g.trim=function(b7){return D.Trim(b7);};g.left=function(b7,b8){return c["String.Left"](b8,b7);};g.right=function(b7,b8){return c["String.Right"](b8,b7);};g.append=function(b7,b8){return b7+b8;};g.skipFirstLine=function(b7){var b8;b8=b7.indexOf("\n");return b8<0?"":C.string(b7,{$:1,$0:b8+1},null);};g.unindent=function(b7){var b8,b9,b_,b$;b8=D.SplitChars(b7,["\n"],0);b9=(b_=y.tryFindIndex(function(ca){return" "!==ca;},(b$=y.tryFind(function(ca){return D.Trim(ca)!=="";},b8),b$==null?"":b$.$0)),b_==null?0:b_.$0);return y.filter(function(ca){return!D.StartsWith(ca,"# 1 ");},y.map(function(ca){return ca.length<=b9?"":ca.substring(b9);},b8));};g.indent=function(b7,b8){var b9,b_;b9=D.SplitChars(b8,["\n"],0);return y.map((b_=D.replicate(b7," "),function(b$){return b_+b$;}),b9);};g.unindentStr=function(){x.$cctor();return x.unindentStr;};g.indentStr=function(b7){function b8(b_){return g.indent(b7,b_);}function b9(b_){return D.concat("\n",b_);}return function(b_){return b9(b8(b_));};};g.skipLastLine=function(){x.$cctor();return x.skipLastLine;};g.StartsWith=function(b7,b8){return D.StartsWith(b8,b7)?{$:1,$0:C.string(b8,{$:1,$0:b7.length},null)}:null;};g.EndsWith=function(b7,b8){return D.EndsWith(b8,b7)?{$:1,$0:C.string(b8,{$:1,$0:0},{$:1,$0:b8.length-b7.length-1})}:null;};g.thousands=function(b7){var b8,b9,b_;b8=a.String(b7);b9=b8.length%3;b_=b9===0?3:b9;return D.concat(",",z.ofSeq(y.delay(function(){return y.append([C.string(b8,{$:1,$0:0},{$:1,$0:b_-1})],y.delay(function(){return y.map(function(b$){return C.string(b8,{$:1,$0:b$*3+b_},{$:1,$0:b$*3+b_+2});},l.range(0,((b8.length-b_)/3>>0)-1));}));})));};h.tryParseWith=function(b7){function b8(b9,b_){return b9?{$:1,$0:b_}:null;}return function(b9){return b8.apply(null,b7(b9));};};h.parseDateO2=function(){x.$cctor();return x.parseDateO2;};h.parseDateO=function(){x.$cctor();return x.parseDateO;};h.parseIntO=function(){x.$cctor();return x.parseIntO;};h.parseInt64O=function(){x.$cctor();return x.parseInt64O;};h.parseSingleO=function(){x.$cctor();return x.parseSingleO;};h.parseDoubleO=function(){x.$cctor();return x.parseDoubleO;};h.parseGuidO=function(){x.$cctor();return x.parseGuidO;};h.Date=function(){x.$cctor();return x["|Date|_|"];};h.Int=function(){x.$cctor();return x["|Int|_|"];};h.Int64=function(){x.$cctor();return x["|Int64|_|"];};h.Single=function(){x.$cctor();return x["|Single|_|"];};h.Double=function(){x.$cctor();return x["|Double|_|"];};h.Guid=function(){x.$cctor();return x["|Guid|_|"];};j.statesPop2019=function(){x.$cctor();return x.statesPop2019;};j.getStatePop=function(b7){return E.TryFind(b7,j.statesPop2019());};j.CovidStatesCurrentUrl=function(){x.$cctor();return x.CovidStatesCurrentUrl;};j.CovidStatesDailyUrl=function(){x.$cctor();return x.CovidStatesDailyUrl;};j.getStateDaily=function(b7){return _8.AsyncMap(I.asyncReadTextAtRuntime(false,"D:\\Abe\\CIPHERWorkspace\\FSharpStation\\src","","JSON","",D.Replace("https://covidtracking.com/api/v1/states/TX/daily.json",b7==="US"?"/states/TX/":"/TX/","/"+b7+"/")),function(b8){return o.Equals(typeof b8,"string")?b1.parse(b8):b8;});};j.daily=function(){x.$cctor();return x.daily;};j.deathsWeekA=function(b7){var b8;b8=null;return X.Delay(function(){return X.Bind(j.getStateDaily(b7),function(b9){var b_;function b$(ca,cb){var cc;cc=E.TryFind(cb+ca*86400000,b_);return cc==null?0:cc.$0;}b_=new J.New(y.sort(n.choose(function(ca){var cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;cb=(cc=(cd="death",cd in ca?{$:1,$0:ca[cd]}:null),cc==null?null:{$:1,$0:1*cc.$0});return cb==null?null:{$:1,$0:[(new a.Date((ce=(cf="date",cf in ca?{$:1,$0:ca[cf]}:null),(cg=ce==null?null:{$:1,$0:1*ce.$0},cg==null?null:cg.$0))/10000>>0,((ch=(ci="date",ci in ca?{$:1,$0:ca[ci]}:null),(cj=ch==null?null:{$:1,$0:1*ch.$0},cj==null?null:cj.$0))/100>>0)%100-1,(ck=(cl="date",cl in ca?{$:1,$0:ca[cl]}:null),(cm=ck==null?null:{$:1,$0:1*ck.$0},cm==null?null:cm.$0))%100)).getTime(),cb.$0]};},b9)));return X.Return(y.map(function(ca){return[ca.K,ca.V-b$(-7,ca.K)];},b_));});});};j.deathsWeek=function(b7){var b8;b8=null;return X.Delay(function(){return X.Bind(j.deathsWeekA(b7),function(b9){return X.Return([b7,b9]);});});};j.printdeathsWeek=function(b7){var b8;X.Start((b8=null,X.Delay(function(){return X.Bind(j.deathsWeekA(b7),function(b9){function b_(b$,ca){(((b3.Curried3(function(cb,cc,cd){return cb(m.prettyPrint(cc)+" "+a.String(cd));}))(function(cb){b0.log(cb);}))(b$))(ca);}y.iter(function(b$){return b_(b$[0],b$[1]);},b9);return X.Zero();});})),null);};j.ahora=function(){x.$cctor();return x.ahora;};j.statesV=function(){x.$cctor();return x.statesV;};j.delayedV=function(){x.$cctor();return x.delayedV;};j.statesW=function(){x.$cctor();return x.statesW;};j.thousands=function(b7){var b8,b9,b_;b8="";b9=a.String(b7);while(true)if(b9==="")return b8;else{b_=b9;b8=c["String.Right"](b_,3)+(b8===""?"":","+b8);b9=c["String.Left"](b_,-3);}};j.funcs=function(){x.$cctor();return x.funcs;};j.functionV=function(){x.$cctor();return x.functionV;};j.functionW=function(){x.$cctor();return x.functionW;};j.main=function(){var b7,b8,b9;function b_(b$,ca){var cb,cc,cd,ce;function cf(ch){return"US"!==ch;}function cg(ch){return y.choose(j.getStatePop,ch);}cb=y.sum(y.choose(function(ch){return ch.K==="US"?null:{$:1,$0:ch.V[0]};},ca));cc=w.Map((cd=(ce=function(ch){return y.filter(cf,ch);},function(ch){return cg(ce(ch));}),function(ch){return y.sum(cd(ch));}),j.statesW());return N.Element("tr",[],[N.Element("td",[],[N.TextNode((new a.Date(b$)).toLocaleDateString())]),N.Convert(function(ch){var ci,cj;return N.Element("td",[],[N.TextNode((ci=(cj=E.TryFind(ch,ca),cj==null?null:cj.$0[1]),ci==null?"":ci.$0))]);},j.statesW()),N.Element("th",[],[N.TextView(w.Map2(function(ch,ci){return(ch(ci))(cb);},j.functionW(),cc))])]);}b7=N.Element("div",[K.Class("container")],[N.Element("h1",[],[N.TextNode("Covid Statistics")]),N.Element("div",[],[N.TextNode("States: "),N.Input([$.Create("style","width: 80%")],j.statesV())]),N.Element("div",[],[N.TextNode("Data: "),N.Select([],a.id,z.map(function(b$){return b$[0];},j.funcs()),j.functionV())]),N.Element("table",[K.Class("table table-sm")],[N.Element("tr",[],[N.Element("th",[],[N.TextNode("Date")]),N.Convert(function(b$){return N.Element("th",[],[N.TextNode(b$)]);},j.statesW()),N.Element("th",[],[N.TextNode("Total")])]),N.Convert(function(b$){return b_(b$[0],b$[1]);},(b8=w.MapAsync(X.Parallel,w.Map(function(b$){return n.map(j.deathsWeek,b$);},j.statesW())),w.Map2(function(b$,ca){function cb(cc,cd){var ce;function cf(cg,ch){var ci,cj,ck,cl,cm,cn;ci=ch[0];cj=ch[1];ck=(cl=j.getStatePop(ce),cl==null?null:{$:1,$0:(b$(cl.$0))(cj)});return cg.Add(ci,(cm=E.TryFind(ci,cg),(cn=new J.New([]),cm==null?cn:cm.$0)).Add(ce,[cj,ck]));}ce=cd[0];return(((b3.Curried3(y.fold))(cf))(cc))(cd[1]);}return y.sortDescending(y.map(function(cc){return[cc.K,cc.V];},(((b3.Curried3(y.fold))(cb))(new J.New(A.Empty)))(ca)));},j.functionW(),b8)))]),N.Verbatim("<link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css\" integrity=\"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh\" crossorigin=\"anonymous\"> ")]);b9=self.document.body;bd.LoadLocalTemplates("");N.Run(b9,b7);};l.range=function(b7,b8){var b9;b9=1+b8-b7;return b9<=0?[]:y.init(b9,function(b_){return b_+b7;});};l.KeyValue=function(b7){return[b7.K,b7.V];};l.FailWith=function(b7){throw new V(b7);};m.toSafe=function(b7){return b7==null?"":b7;};m.prettyPrint=function(b7){var b8,b9;function b_(b$,ca){return b$+" = "+m.prettyPrint(ca);}return b7===null?"null":(b8=typeof b7,b8=="string"?"\""+b7+"\"":b8=="object"?b7 instanceof a.Array?"[|"+D.concat("; ",n.map(m.prettyPrint,b7))+"|]":(b9=a.String(b7),b9==="[object Object]"?"{"+D.concat("; ",n.map(function(b$){return b_(b$[0],b$[1]);},R.GetFields(b7)))+"}":b9):a.String(b7));};n.get=function(b7,b8){n.checkBounds(b7,b8);return b7[b8];};n.length=function(b7){return b7.dims===2?b7.length*b7.length:b7.length;};n.checkBounds=function(b7,b8){if(b8<0||b8>=b7.length)l.FailWith("Index was outside the bounds of the array.");};n.set=function(b7,b8,b9){n.checkBounds(b7,b8);b7[b8]=b9;};o.Compare=function(b7,b8){var b9,b_,b$,ca,cb,cc;if(b7===b8)return 0;else{b_=typeof b7;switch(b_=="function"?1:b_=="boolean"?2:b_=="number"?2:b_=="string"?2:b_=="object"?3:0){case 0:return typeof b8=="undefined"?0:-1;case 1:return l.FailWith("Cannot compare function values.");case 2:return b7<b8?-1:1;case 3:if(b7===null)b$=-1;else if(b8===null)b$=1;else if("CompareTo"in b7)b$=b7.CompareTo(b8);else if("CompareTo0"in b7)b$=b7.CompareTo0(b8);else if(b7 instanceof a.Array&&b8 instanceof a.Array)b$=o.compareArrays(b7,b8);else if(b7 instanceof a.Date&&b8 instanceof a.Date)b$=o.compareDates(b7,b8);else{ca=[0];for(var cd in b7)if(function(ce){return!b7.hasOwnProperty(ce)?false:!b8.hasOwnProperty(ce)?(ca[0]=1,true):(ca[0]=o.Compare(b7[ce],b8[ce]),ca[0]!==0);}(cd))break;if(ca[0]===0){for(var ce in b8)if(function(cf){return!b8.hasOwnProperty(cf)?false:!b7.hasOwnProperty(cf)&&(ca[0]=-1,true);}(ce))break;}b$=ca[0];}return b$;}}};o.Equals=function(b7,b8){var b9,b_,b$,ca;if(b7===b8)return true;else{b9=typeof b7;if(b9=="object"){if(b7===null||b7===void 0||b8===null||b8===void 0)return false;else if("Equals"in b7)return b7.Equals(b8);else if(b7 instanceof a.Array&&b8 instanceof a.Array)return o.arrayEquals(b7,b8);else if(b7 instanceof a.Date&&b8 instanceof a.Date)return o.dateEquals(b7,b8);else{b_=[true];for(var cb in b7)if(function(cc){b_[0]=!b7.hasOwnProperty(cc)||b8.hasOwnProperty(cc)&&o.Equals(b7[cc],b8[cc]);return!b_[0];}(cb))break;if(b_[0]){for(var cc in b8)if(function(cd){b_[0]=!b8.hasOwnProperty(cd)||b7.hasOwnProperty(cd);return!b_[0];}(cc))break;}return b_[0];}}else return b9=="function"&&("$Func"in b7?b7.$Func===b8.$Func&&b7.$Target===b8.$Target:"$Invokes"in b7&&"$Invokes"in b8&&o.arrayEquals(b7.$Invokes,b8.$Invokes));}};o.Hash=function(b7){var b8;b8=typeof b7;return b8=="function"?0:b8=="boolean"?b7?1:0:b8=="number"?b7:b8=="string"?o.hashString(b7):b8=="object"?b7==null?0:b7 instanceof a.Array?o.hashArray(b7):o.hashObject(b7):0;};o.compareArrays=function(b7,b8){var b9,b_;if(n.length(b7)<n.length(b8))return -1;else if(n.length(b7)>n.length(b8))return 1;else{b9=0;b_=0;while(b9===0&&b_<n.length(b7)){b9=o.Compare(n.get(b7,b_),n.get(b8,b_));b_=b_+1;}return b9;}};o.compareDates=function(b7,b8){return o.Compare(b7.getTime(),b8.getTime());};o.arrayEquals=function(b7,b8){var b9,b_;if(n.length(b7)===n.length(b8)){b9=true;b_=0;while(b9&&b_<n.length(b7)){!o.Equals(n.get(b7,b_),n.get(b8,b_))?b9=false:void 0;b_=b_+1;}return b9;}else return false;};o.dateEquals=function(b7,b8){return b7.getTime()===b8.getTime();};o.hashString=function(b7){var b8,b9,b_;if(b7===null)return 0;else{b8=5381;for(b9=0,b_=b7.length-1;b9<=b_;b9++)b8=o.hashMix(b8,b7[b9].charCodeAt());return b8;}};o.hashArray=function(b7){var b8,b9,b_;b8=-34948909;for(b9=0,b_=n.length(b7)-1;b9<=b_;b9++)b8=o.hashMix(b8,o.Hash(n.get(b7,b9)));return b8;};o.hashObject=function(b7){var b8,b9;if("GetHashCode"in b7)return b7.GetHashCode();else{b8=[0];for(var b_ in b7)if(function(b$){b8[0]=o.hashMix(o.hashMix(b8[0],o.hashString(b$)),o.Hash(b7[b$]));return false;}(b_))break;return b8[0];}};o.hashMix=function(b7,b8){return(b7<<5)+b7+b8;};p=k.Obj=b3.Class({Equals:function(b7){return this===b7;},GetHashCode:function(){return -1;}},null,p);p.New=b3.Ctor(function(){},p);r=q.Dictionary=b3.Class({TryGetValue:function(b7,b8){var b9,b_,b$;b9=this;b_=this.data[this.hash(b7)];return b_==null?false:(b$=n.tryPick(function(ca){var cb;cb=l.KeyValue(ca);return b9.equals.apply(null,[cb[0],b7])?{$:1,$0:cb[1]}:null;},b_),b$!=null&&b$.$==1&&(b8.set(b$.$0),true));},Clear:function(){this.data=[];this.count=0;},set_Item:function(b7,b8){this.set(b7,b8);},set:function(b7,b8){var b9,b_,b$,ca;b9=this;b_=this.hash(b7);b$=this.data[b_];b$==null?(this.count=this.count+1,this.data[b_]=new a.Array({K:b7,V:b8})):(ca=n.tryFindIndex(function(cb){return b9.equals.apply(null,[(l.KeyValue(cb))[0],b7]);},b$),ca==null?(this.count=this.count+1,b$.push({K:b7,V:b8})):b$[ca.$0]={K:b7,V:b8});},ContainsKey:function(b7){var b8,b9;b8=this;b9=this.data[this.hash(b7)];return b9==null?false:n.exists(function(b_){return b8.equals.apply(null,[(l.KeyValue(b_))[0],b7]);},b9);},Remove:function(b7){return this.remove(b7);},get_Keys:function(){return new bG.New(this);},get_Item:function(b7){return this.get(b7);},remove:function(b7){var b8,b9,b_,b$;b8=this;b9=this.hash(b7);b_=this.data[b9];return b_==null?false:(b$=n.filter(function(ca){return!b8.equals.apply(null,[(l.KeyValue(ca))[0],b7]);},b_),n.length(b$)<b_.length&&(this.count=this.count-1,this.data[b9]=b$,true));},get:function(b7){var b8,b9;b8=this;b9=this.data[this.hash(b7)];return b9==null?U.notPresent():n.pick(function(b_){var b$;b$=l.KeyValue(b_);return b8.equals.apply(null,[b$[0],b7])?{$:1,$0:b$[1]}:null;},b9);},GetEnumerator:function(){return _5.Get0(this);},GetEnumerator0:function(){return _5.Get0(n.concat(R.GetFieldValues(this.data)));}},p,r);r.New$5=b3.Ctor(function(){r.New$6.call(this,[],o.Equals,o.Hash);},r);r.New$6=b3.Ctor(function(b7,b8,b9){var b_,b$;p.New.call(this);this.equals=b8;this.hash=b9;this.count=0;this.data=[];b_=_5.Get(b7);try{while(b_.MoveNext()){b$=b_.Current();this.set(b$.K,b$.V);}}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}},r);s=k.CancellationTokenSource=b3.Class({Cancel$1:function(){var b7;if(!this.c){this.c=true;b7=n.choose(function(b8){try{b8();return null;}catch(b9){return{$:1,$0:b9};}},this.r);if(n.length(b7)>0)throw new W.New$3(b7);else void 0;}}},p,s);s.New=b3.Ctor(function(){p.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},s);u=t.Var$1=b3.Class({},p,u);u.Create$1=function(b7){return new Y.New(false,Z.New({$:2,$0:b7,$1:[]}),b7);};v=t.Var=b3.Class({},p,v);v.New=b3.Ctor(function(){p.New.call(this);},v);w.Sink=function(b7,b8){function b9(){Z.WhenRun(b8(),b7,function(){X.scheduler().Fork(b9);});}X.scheduler().Fork(b9);};w.Map=function(b7,b8){return w.CreateLazy(function(){return Z.Map(b7,b8());});};w.MapAsync=function(b7,b8){return w.CreateLazy(function(){return Z.MapAsync(b7,b8());});};w.Map2=function(b7,b8,b9){return w.CreateLazy(function(){return Z.Map2(b7,b8(),b9());});};w.CreateLazy=function(b7){var b8;b8={c:null,o:b7};return function(){var b9,b_;b9=b8.c;return b9===null?(b9=b8.o(),b8.c=b9,(b_=b9.s,b_!=null&&b_.$==0)?b8.o=null:Z.WhenObsoleteRun(b9,function(){b8.c=null;}),b9):b9;};};w.Const=function(b7){var b8;b8=Z.New({$:0,$0:b7});return function(){return b8;};};w.MapSeqCached=function(b7,b8){return w.MapSeqCachedBy(a.id,b7,b8);};w.MapSeqCachedBy=function(b7,b8,b9){var b_;b_=[new r.New$5()];return w.Map(function(b$){var ca,cb,cc;ca=b_[0];cb=new r.New$5();cc=ba.mapInPlace(function(cd){var ce,cf;ce=b7(cd);cf=ca.ContainsKey(ce)?ca.get_Item(ce):b8(cd);cb.set_Item(ce,cf);return cf;},n.ofSeq(b$));b_[0]=cb;return cc;},b9);};w.Map2Unit=function(b7,b8){return w.CreateLazy(function(){return Z.Map2Unit(b7(),b8());});};w.Bind=function(b7,b8){return w.Join(w.Map(b7,b8));};w.Join=function(b7){return w.CreateLazy(function(){return Z.Join(b7());});};x.$cctor=function(){var b7,b8;x.$cctor=a.ignore;function b9(cc){return D.concat("\n",cc);}function b_(cc){return g.splitByChar("\n",cc);}function b$(cc){var cd,ce;return C.array(cc,{$:1,$0:0},{$:1,$0:(cd=0,(ce=n.length(cc)-2,o.Compare(cd,ce)===1?cd:ce))});}function ca(cc){return D.concat("\n",cc);}function cb(cc){return cc+"T00:00:00";}x.rtn=function(cc){return[cc];};x.unindentStr=function(cc){return b9(g.unindent(cc));};x.skipLastLine=(b7=function(cc){return b$(b_(cc));},function(cc){return ca(b7(cc));});x.parseDateO2=(b8=h.tryParseWith(function(cc){var cd,ce;cd=0;return[(ce=bi.TryParse(cc),ce!=null&&ce.$==1&&(cd=ce.$0,true)),cd];}),function(cc){return b8(cb(cc));});x.parseDateO=h.tryParseWith(function(cc){var cd,ce;cd=0;return[(ce=bi.TryParse(cc),ce!=null&&ce.$==1&&(cd=ce.$0,true)),cd];});x.parseIntO=h.tryParseWith(function(cc){var cd;cd=0;return[_2.TryParseInt32(cc,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd];});x.parseInt64O=h.tryParseWith(function(cc){var cd;cd=0;return[_2.TryParseInt64(cc,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd];});x.parseSingleO=h.tryParseWith(function(cc){var cd,ce;cd=0;return[(ce=a.Number(cc),a.isNaN(ce)?false:(cd=ce,true)),cd];});x.parseDoubleO=h.tryParseWith(function(cc){var cd,ce;cd=0;return[(ce=a.Number(cc),a.isNaN(ce)?false:(cd=ce,true)),cd];});x.parseGuidO=h.tryParseWith(function(cc){var cd;cd=null;return[_4.TryParse(cc,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd];});x["|Date|_|"]=h.parseDateO();x["|Int|_|"]=h.parseIntO();x["|Int64|_|"]=h.parseInt64O();x["|Single|_|"]=h.parseSingleO();x["|Double|_|"]=h.parseDoubleO();x["|Guid|_|"]=h.parseGuidO();x.statesPop2019=new J.New(z.ofArray([["US",328239523],["AL",4903185],["AK",731545],["AZ",7278717],["AR",3017804],["CA",39512223],["CO",5758736],["CT",3565287],["DE",973764],["DC",705749],["FL",21477737],["GA",10617423],["HI",1415872],["ID",1787065],["IL",12671821],["IN",6732219],["IA",3155070],["KS",2913314],["KY",4467673],["LA",4648794],["ME",1344212],["MD",6045680],["MA",6892503],["MI",9986857],["MN",5639632],["MS",2976149],["MO",6137428],["MT",1068778],["NE",1934408],["NV",3080156],["NH",1359711],["NJ",8882190],["NM",2096829],["NY",19453561],["NC",10488084],["ND",762062],["OH",11689100],["OK",3956971],["OR",4217737],["PA",12801989],["RI",1059361],["SC",5148714],["SD",884659],["TN",6829174],["TX",28995881],["UT",3205958],["VT",623989],["VA",8535519],["WA",7614893],["WV",1792147],["WI",5822434],["WY",578759],["PR",3193694]]));x.CovidStatesCurrentUrl="https://covidtracking.com/api/v1/states/TX/current.json";x.CovidStatesDailyUrl="https://covidtracking.com/api/v1/states/TX/daily.json";x.daily=j.getStateDaily("TX");x.ahora=b4.now();x.statesV=u.Create$1("TX NJ CT NY MA MI LA PA US");x.delayedV=c.delayedVar(1000,j.statesV());x.statesW=w.Map(function(cc){return D.SplitChars(D.Trim(cc),[" "],0);},j.delayedV().get_View());x.funcs=z.ofArray([["deaths per 100K",function(cc){return function(cd){return j.thousands(cd*52*100000/cc>>0);};}],["daily deaths (smoothed)",function(){return function(cc){return j.thousands(cc/7>>0);};}],["weekly deaths",function(){return j.thousands;}],["yearly deaths",function(){return function(cc){return j.thousands(cc*52);};}],["population",function(cc){return function(){return j.thousands(cc);};}]]);x.functionV=u.Create$1((y.head(j.funcs()))[0]);x.functionW=w.Map(function(cc){function cd(cf){return cf[0];}function ce(cf){return cc===cf;}return(y.find(function(cf){return ce(cd(cf));},j.funcs()))[1];},j.functionV().get_View());};y.map=function(b7,b8){return{GetEnumerator:function(){var b9;b9=_5.Get(b8);return new _6.New(null,null,function(b_){return b9.MoveNext()&&(b_.c=b7(b9.Current()),true);},function(){b9.Dispose();});}};};y.choose=function(b7,b8){return y.collect(function(b9){var b_;b_=b7(b9);return b_==null?A.Empty:z.ofArray([b_.$0]);},b8);};y.mapi=function(b7,b8){return y.map2(b7,y.initInfinite(a.id),b8);};y.collect=function(b7,b8){return y.concat(y.map(b7,b8));};y.tryFind=function(b7,b8){var b9,b_,b$;b9=_5.Get(b8);try{b_=null;while(b_==null&&b9.MoveNext()){b$=b9.Current();b7(b$)?b_={$:1,$0:b$}:void 0;}return b_;}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}};y.tryFindIndex=function(b7,b8){var b9,b_,b$;b9=_5.Get(b8);try{b_=true;b$=0;while(b_&&b9.MoveNext())if(b7(b9.Current()))b_=false;else b$=b$+1;return b_?null:{$:1,$0:b$};}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}};y.filter=function(b7,b8){return{GetEnumerator:function(){var b9;b9=_5.Get(b8);return new _6.New(null,null,function(b_){var b$,ca,cb;b$=b9.MoveNext();ca=b9.Current();cb=false;while(b$)if(b7(ca)){b_.c=ca;cb=true;b$=false;}else if(b9.MoveNext())ca=b9.Current();else b$=false;return cb;},function(){b9.Dispose();});}};};y.delay=function(b7){return{GetEnumerator:function(){return _5.Get(b7());}};};y.append=function(b7,b8){return{GetEnumerator:function(){var b9,b_;b9=_5.Get(b7);b_=[true];return new _6.New(b9,null,function(b$){var ca;return b$.s.MoveNext()?(b$.c=b$.s.Current(),true):(ca=b$.s,!o.Equals(ca,null)?ca.Dispose():void 0,b$.s=null,b_[0]&&(b_[0]=false,b$.s=_5.Get(b8),b$.s.MoveNext()?(b$.c=b$.s.Current(),true):(b$.s.Dispose(),b$.s=null,false)));},function(b$){var ca;ca=b$.s;!o.Equals(ca,null)?ca.Dispose():void 0;});}};};y.sort=function(b7){return y.sortBy(a.id,b7);};y.iter=function(b7,b8){var b9;b9=_5.Get(b8);try{while(b9.MoveNext())b7(b9.Current());}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}};y.fold=function(b7,b8,b9){var b_,b$;b_=b8;b$=_5.Get(b9);try{while(b$.MoveNext())b_=b7(b_,b$.Current());return b_;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};y.sortDescending=function(b7){return y.sortByDescending(a.id,b7);};y.sum=function(b7){return y.fold(function(b8,b9){return b8+b9;},0,b7);};y.head=function(b7){var b8;b8=_5.Get(b7);try{return b8.MoveNext()?b8.Current():y.insufficient();}finally{if(typeof b8=="object"&&"Dispose"in b8)b8.Dispose();}};y.find=function(b7,b8){var b9;b9=y.tryFind(b7,b8);return b9==null?l.FailWith("KeyNotFoundException"):b9.$0;};y.map2=function(b7,b8,b9){return{GetEnumerator:function(){var b_,b$;b_=_5.Get(b8);b$=_5.Get(b9);return new _6.New(null,null,function(ca){return b_.MoveNext()&&b$.MoveNext()&&(ca.c=b7(b_.Current(),b$.Current()),true);},function(){b_.Dispose();b$.Dispose();});}};};y.initInfinite=function(b7){return{GetEnumerator:function(){return new _6.New(0,null,function(b8){b8.c=b7(b8.s);b8.s=b8.s+1;return true;},void 0);}};};y.concat=function(b7){return{GetEnumerator:function(){var b8;b8=_5.Get(b7);return new _6.New(null,null,function(b9){var b_;while(true){b_=b9.s;if(o.Equals(b_,null)){if(b8.MoveNext()){b9.s=_5.Get(b8.Current());b9=b9;}else{b8.Dispose();return false;}}else if(b_.MoveNext()){b9.c=b_.Current();return true;}else{b9.Dispose();b9.s=null;b9=b9;}}},function(b9){var b_;b_=b9.s;!o.Equals(b_,null)?b_.Dispose():void 0;!o.Equals(b8,null)?b8.Dispose():void 0;});}};};y.init=function(b7,b8){return y.take(b7,y.initInfinite(b8));};y.sortBy=function(b7,b8){return y.delay(function(){var b9;b9=n.ofSeq(b8);n.sortInPlaceBy(b7,b9);return b9;});};y.sortByDescending=function(b7,b8){return y.delay(function(){var b9;b9=n.ofSeq(b8);n.sortInPlaceByDescending(b7,b9);return b9;});};y.take=function(b7,b8){b7<0?y.nonNegative():void 0;return{GetEnumerator:function(){var b9;b9=[_5.Get(b8)];return new _6.New(0,null,function(b_){var b$;b_.s=b_.s+1;return b_.s>b7?false:(b$=b9[0],o.Equals(b$,null)?y.insufficient():b$.MoveNext()?(b_.c=b$.Current(),b_.s===b7?(b$.Dispose(),b9[0]=null):void 0,true):(b$.Dispose(),b9[0]=null,y.insufficient()));},function(){var b_;b_=b9[0];!o.Equals(b_,null)?b_.Dispose():void 0;});}};};y.distinctBy=function(b7,b8){return{GetEnumerator:function(){var b9,b_;b9=_5.Get(b8);b_=new bt.New$3();return new _6.New(null,null,function(b$){var ca,cb;if(b9.MoveNext()){ca=b9.Current();cb=b_.Add(b7(ca));while(!cb&&b9.MoveNext()){ca=b9.Current();cb=b_.Add(b7(ca));}return cb&&(b$.c=ca,true);}else return false;},function(){b9.Dispose();});}};};y.compareWith=function(b7,b8,b9){var b_,b$,ca,cb,cc;b_=_5.Get(b8);try{ca=_5.Get(b9);try{cb=0;cc=true;while(cc&&cb===0)if(b_.MoveNext())cb=ca.MoveNext()?b7(b_.Current(),ca.Current()):1;else if(ca.MoveNext())cb=-1;else cc=false;b$=cb;}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};y.findIndex=function(b7,b8){var b9;b9=y.tryFindIndex(b7,b8);return b9==null?l.FailWith("KeyNotFoundException"):b9.$0;};y.forall2=function(b7,b8,b9){return!y.exists2(function(b_,b$){return!b7(b_,b$);},b8,b9);};y.exists2=function(b7,b8,b9){var b_,b$,ca,cb;b_=_5.Get(b8);try{ca=_5.Get(b9);try{cb=false;while(!cb&&b_.MoveNext()&&ca.MoveNext())cb=b7(b_.Current(),ca.Current());b$=cb;}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};y.nth=function(b7,b8){var b9,b_;if(b7<0)l.FailWith("negative index requested");b9=-1;b_=_5.Get(b8);try{while(b9<b7){!b_.MoveNext()?y.insufficient():void 0;b9=b9+1;}return b_.Current();}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};y.unfold=function(b7,b8){return{GetEnumerator:function(){return new _6.New(b8,null,function(b9){var b_;b_=b7(b9.s);return b_==null?false:(b9.c=b_.$0[0],b9.s=b_.$0[1],true);},void 0);}};};y.max=function(b7){var b8,b9,b_;b8=_5.Get(b7);try{if(!b8.MoveNext())y.seqEmpty();b9=b8.Current();while(b8.MoveNext()){b_=b8.Current();o.Compare(b_,b9)===1?b9=b_:void 0;}return b9;}finally{if(typeof b8=="object"&&"Dispose"in b8)b8.Dispose();}};y.seqEmpty=function(){return l.FailWith("The input sequence was empty.");};n.foldBack=function(b7,b8,b9){var b_,b$,ca,cb,cc;b_=b9;ca=b8.length;for(cb=1,cc=ca;cb<=cc;cb++)b_=b7(b8[ca-cb],b_);return b_;};n.choose=function(b7,b8){var b9,b_,b$,ca;b9=[];for(b_=0,b$=b8.length-1;b_<=b$;b_++){ca=b7(b8[b_]);ca==null?void 0:b9.push(ca.$0);}return b9;};n.map=function(b7,b8){var b9,b_,b$;b9=new a.Array(b8.length);for(b_=0,b$=b8.length-1;b_<=b$;b_++)b9[b_]=b7(b8[b_]);return b9;};n.tryPick=function(b7,b8){var b9,b_,b$;b9=null;b_=0;while(b_<b8.length&&b9==null){b$=b7(b8[b_]);b$!=null&&b$.$==1?b9=b$:void 0;b_=b_+1;}return b9;};n.ofSeq=function(b7){var b8,b9;if(b7 instanceof a.Array)return b7.slice();else if(b7 instanceof A)return n.ofList(b7);else{b8=[];b9=_5.Get(b7);try{while(b9.MoveNext())b8.push(b9.Current());return b8;}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}}};n.create=function(b7,b8){var b9,b_,b$;b9=new a.Array(b7);for(b_=0,b$=b7-1;b_<=b$;b_++)b9[b_]=b8;return b9;};n.tryFindIndex=function(b7,b8){var b9,b_;b9=null;b_=0;while(b_<b8.length&&b9==null){b7(b8[b_])?b9={$:1,$0:b_}:void 0;b_=b_+1;}return b9;};n.ofList=function(b7){var b8,b9;b9=[];b8=b7;while(!(b8.$==0)){b9.push(z.head(b8));b8=z.tail(b8);}return b9;};n.sortInPlaceBy=function(b7,b8){n.mapInPlace(function(b9){return b9[0];},n.mapiInPlace(function(b9,b_){return[b_,[b7(b_),b9]];},b8).sort(function(b9,b_){return o.Compare(b9[1],b_[1]);}));};n.sortInPlace=function(b7){n.mapInPlace(function(b8){return b8[0];},n.mapiInPlace(function(b8,b9){return[b9,b8];},b7).sort(o.Compare));};n.iteri=function(b7,b8){var b9,b_;for(b9=0,b_=b8.length-1;b9<=b_;b9++)b7(b9,b8[b9]);};n.filter=function(b7,b8){var b9,b_,b$;b9=[];for(b_=0,b$=b8.length-1;b_<=b$;b_++)if(b7(b8[b_]))b9.push(b8[b_]);return b9;};n.exists=function(b7,b8){var b9,b_,b$,ca;b9=false;b_=0;ca=n.length(b8);while(!b9&&b_<ca)if(b7(b8[b_]))b9=true;else b_=b_+1;return b9;};n.concat=function(b7){return a.Array.prototype.concat.apply([],n.ofSeq(b7));};n.iter=function(b7,b8){var b9,b_;for(b9=0,b_=b8.length-1;b9<=b_;b9++)b7(b8[b9]);};n.pick=function(b7,b8){var b9;b9=n.tryPick(b7,b8);return b9==null?l.FailWith("KeyNotFoundException"):b9.$0;};n.init=function(b7,b8){var b9,b_,b$;b7<0?l.FailWith("Negative size given."):null;b9=new a.Array(b7);for(b_=0,b$=b7-1;b_<=b$;b_++)b9[b_]=b8(b_);return b9;};n.forall=function(b7,b8){var b9,b_,b$,ca;b9=true;b_=0;ca=n.length(b8);while(b9&&b_<ca)if(b7(b8[b_]))b_=b_+1;else b9=false;return b9;};z.ofArray=function(b7){var b8,b9,b_;b8=A.Empty;for(b9=n.length(b7)-1,b_=0;b9>=b_;b9--)b8=new A({$:1,$0:n.get(b7,b9),$1:b8});return b8;};z.map=function(b7,b8){var b9,b_,b$,ca,cb;if(b8.$==0)return b8;else{ca=new A({$:1});b9=ca;b_=b8;b$=true;while(b$){b9.$0=b7(b_.$0);b_=b_.$1;b_.$==0?b$=false:b9=(cb=new A({$:1}),b9.$1=cb,cb);}b9.$1=A.Empty;return ca;}};z.ofSeq=function(b7){var b8,b9,b_,b$,ca,cb;if(b7 instanceof A)return b7;else if(b7 instanceof a.Array)return z.ofArray(b7);else{b8=_5.Get(b7);try{b_=b8.MoveNext();if(!b_)b9=A.Empty;else{ca=new A({$:1});b$=ca;while(b_){b$.$0=b8.Current();b8.MoveNext()?b$=(cb=new A({$:1}),b$.$1=cb,cb):b_=false;}b$.$1=A.Empty;b9=ca;}return b9;}finally{if(typeof b8=="object"&&"Dispose"in b8)b8.Dispose();}}};z.mapi=function(b7,b8){var b9,b_,b$,ca,cb,cc;if(b8.$==0)return b8;else{cb=new A({$:1});b9=cb;b_=b8;b$=0;ca=true;while(ca){b9.$0=b7(b$,b_.$0);b_=b_.$1;b_.$==0?ca=false:(b9=(cc=new A({$:1}),b9.$1=cc,cc),b$=b$+1);}b9.$1=A.Empty;return cb;}};z.head=function(b7){return b7.$==1?b7.$0:z.listEmpty();};z.tail=function(b7){return b7.$==1?b7.$1:z.listEmpty();};z.listEmpty=function(){return l.FailWith("The input list was empty.");};A=z.T=b3.Class({get_Item:function(b7){return y.nth(b7,this);},GetEnumerator:function(){return new _6.New(this,null,function(b7){var b8;b8=b7.s;return b8.$==0?false:(b7.c=b8.$0,b7.s=b8.$1,true);},void 0);},GetEnumerator0:function(){return _5.Get(this);}},null,A);A.Empty=new A({$:0});B.IsUpper=function(b7){return b7>="A"&&b7<="Z";};C.string=function(b7,b8,b9){return b8==null?b9!=null&&b9.$==1?b7.slice(0,b9.$0+1):"":b9==null?b7.slice(b8.$0):b7.slice(b8.$0,b9.$0+1);};C.array=function(b7,b8,b9){return b8==null?b9!=null&&b9.$==1?b7.slice(0,b9.$0+1):[]:b9==null?b7.slice(b8.$0):b7.slice(b8.$0,b9.$0+1);};D.replicate=function(b7,b8){return n.create(b7,b8).join("");};D.concat=function(b7,b8){return n.ofSeq(b8).join(b7);};D.Substring=function(b7,b8,b9){return b7.substr(b8,b9);};D.SplitChars=function(b7,b8,b9){return D.Split(b7,new a.RegExp("["+D.RegexEscape(b8.join(""))+"]"),b9);};D.Trim=function(b7){return b7.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};D.StartsWith=function(b7,b8){return b7.substring(0,b8.length)==b8;};D.EndsWith=function(b7,b8){return b7.substring(b7.length-b8.length)==b8;};D.Replace=function(b7,b8,b9){function b_(b$){var ca,cb,cc;ca=b$.indexOf(b8);return ca!==-1?(cb=D.ReplaceOnce(b$,b8,b9),(cc=ca+b9.length,D.Substring(cb,0,ca+b9.length)+b_(cb.substring(cc)))):b$;}return b_(b7);};D.Split=function(b7,b8,b9){return b9===1?n.filter(function(b_){return b_!=="";},D.SplitWith(b7,b8)):D.SplitWith(b7,b8);};D.RegexEscape=function(b7){return b7.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};D.ReplaceOnce=function(b7,b8,b9){return b7.replace(b8,b9);};D.SplitWith=function(b7,b8){return b7.split(b8);};D.ReplaceChar=function(b7,b8,b9){return D.Replace(b7,b8,b9);};E.TryFind=function(b7,b8){return b8.TryFind(b7);};I.asyncReadTextAtRuntime=function(b7,b8,b9,b_,b$,ca){function cb(cc,cd){var ce,cf,cg,ch,ci;ce=(cf=ca.toLowerCase(),D.StartsWith(cf,"jsonp|")?[ca.substring(6),true]:D.StartsWith(cf,"json|")?[ca.substring(5),false]:[ca,false]);cg=(ch={},ch.dataType="json",ch.success=function(cj){return cc(cj);},ch.error=function(cj,ck,cl){return cd(new V(cl));},ch);ce[1]?(ci=_9.randomFunctionName(),cg.dataType="jsonp",cg.jsonp="prefix",cg.jsonpCallback="jsonp"+ci):void 0;b5.ajax(ce[0],cg);}return X.FromContinuations(function(cc,cd,ce){return cb.apply(null,[cc,cd,ce]);});};J=q.FSharpMap=b3.Class({TryFind:function(b7){var b8;b8=bk.TryFind(bl.New(b7,void 0),this.tree);return b8==null?null:{$:1,$0:b8.$0.Value};},Add:function(b7,b8){return new J.New$1(bk.Add(bl.New(b7,b8),this.tree));},GetEnumerator$1:function(){return _5.Get(y.map(function(b7){return{K:b7.Key,V:b7.Value};},bk.Enumerate(false,this.tree)));},Equals:function(b7){return this.get_Count()===b7.get_Count()&&y.forall2(o.Equals,this,b7);},get_Count:function(){var b7;b7=this.tree;return b7==null?0:b7.Count;},GetHashCode:function(){return o.Hash(n.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(b7){return y.compareWith(o.Compare,this,b7);},GetEnumerator0:function(){return this.GetEnumerator$1();}},p,J);J.New=b3.Ctor(function(b7){J.New$1.call(this,_.fromSeq(b7));},J);J.New$1=b3.Ctor(function(b7){p.New.call(this);this.tree=b7;},J);K.Class=function(b7){return K.ClassPred(b7,true);};K.ClassPred=function(b7,b8){return bo.Static(function(b9){if(b8)bp.AddClass(b9,b7);else bp.RemoveClass(b9,b7);});};K.Value=function(b7){function b8(b9){return{$:1,$0:b9};}return K.CustomValue(b7,a.id,function(b9){return b8(a.id(b9));});};K.CustomValue=function(b7,b8,b9){return K.CustomVar(b7,function(b_,b$){b_.value=b8(b$);},function(b_){return b9(b_.value);});};K.OnAfterRender=function(b7){return new $({$:4,$0:b7});};K.DynamicCustom=function(b7,b8){return bo.Dynamic(b8,b7);};K.CustomVar=function(b7,b8,b9){function b_(ca,cb){return b7.UpdateMaybe(function(cc){var cd,ce;cd=b9(ca);return cd!=null&&cd.$==1&&(!o.Equals(cd.$0,cc)&&(ce=[cd,cd.$0],true))?ce[0]:null;});}function b$(ca,cb){var cc,cd;cc=b9(ca);return cc!=null&&cc.$==1&&(o.Equals(cc.$0,cb)&&(cd=cc.$0,true))?null:b8(ca,cb);}return $.Concat([K.Handler("change",function(ca){return function(cb){return b_(ca,cb);};}),K.Handler("input",function(ca){return function(cb){return b_(ca,cb);};}),K.Handler("keypress",function(ca){return function(cb){return b_(ca,cb);};}),K.DynamicCustom(function(ca){return function(cb){return b$(ca,cb);};},b7.get_View())]);};K.Handler=function(b7,b8){return bo.Static(function(b9){b9.addEventListener(b7,function(b_){return(b8(b9))(b_);},false);});};M=L.attr=b3.Class({},p,M);N=t.Doc=b3.Class({},p,N);N.Verbatim=function(b7){var b8;return N.Mk(ba.MapTreeReduce(function(b9){return o.Equals(b9.nodeType,P.TEXT_NODE)?{$:5,$0:b9}:{$:1,$0:bb.CreateElemNode(b9,bo.EmptyAttr(),null)};},null,function(b9,b_){return{$:0,$0:b9,$1:b_};},(b8=b5.parseHTML(b7),o.Equals(b8,null)?[]:b8)),w.Const());};N.TextNode=function(b7){return N.Mk({$:5,$0:bp.CreateText(b7)},w.Const());};N.Input=function(b7,b8){return N.InputInternal("input",function(){return y.append(b7,[K.Value(b8)]);});};N.Select=function(b7,b8,b9,b_){return N.SelectImpl(b7,b8,function(b$){b$[0]=b9;return N.Concat(z.mapi(function(ca,cb){return N.Element("option",z.ofArray([$.Create("value",a.String(ca))]),z.ofArray([N.TextNode(b8(cb))]));},b9));},b_);};N.Convert=function(b7,b8){return N.Flatten(w.MapSeqCached(b7,b8));};N.TextView=function(b7){var b8;b8=bb.CreateTextNode();return N.Mk({$:4,$0:b8},w.Map(function(b9){bb.UpdateTextNode(b8,b9);},b7));};N.Mk=function(b7,b8){return new N.New(b7,b8);};N.Run=function(b7,b8){bb.LinkElement(b7,b8.docNode);N.RunInPlace(false,b7,b8);};N.Element=function(b7,b8,b9){var b_,b$;b_=$.Concat(b8);b$=N.Concat(b9);return bD.New(bp.CreateElement(b7),b_,b$);};N.InputInternal=function(b7,b8){var b9;b9=bp.CreateElement(b7);return bD.New(b9,$.Concat(b8(b9)),N.get_Empty());};N.SelectImpl=function(b7,b8,b9,b_){var b$,ca,cb,cc;function cd(ci){return ci.selectedIndex;}function ce(ci,cj){ci.selectedIndex=cj;}function cf(ci){var cj;cj=cd(ci);return b$[0].get_Item(cj);}function cg(ci){return y.findIndex(function(cj){return o.Equals(ci,cj);},b$[0]);}function ch(ci,cj){return ce(ci,cg(cj));}b$=[A.Empty];ca=bp.CreateElement("select");cb=K.DynamicCustom(function(ci){return function(cj){return ch(ci,cj);};},b_.get_View());ca.addEventListener("change",function(){b_.UpdateMaybe(function(ci){var cj;cj=cf(ca);return o.Equals(ci,cj)?null:{$:1,$0:cj};});},false);return bD.New(ca,(cc=$.Append(cb,$.Concat(b7)),$.Append(K.OnAfterRender(function(ci){ch(ci,b_.Get());}),cc)),b9(b$));};N.Concat=function(b7){var b8;b8=ba.ofSeqNonCopying(b7);return ba.TreeReduce(N.get_Empty(),N.Append,b8);};N.Flatten=function(b7){return N.EmbedView(w.Map(N.Concat,b7));};N.RunInPlace=function(b7,b8,b9){var b_;b_=bb.CreateRunState(b8,b9.docNode);w.Sink(bz.get_UseAnimations()||bA.BatchUpdatesEnabled()?bB.StartProcessor(bb.PerformAnimatedUpdate(b7,b_,b9.docNode)):function(){bb.PerformSyncUpdate(b7,b_,b9.docNode);},b9.updates);};N.get_Empty=function(){return N.Mk(null,w.Const());};N.Append=function(b7,b8){return N.Mk({$:0,$0:b7.docNode,$1:b8.docNode},w.Map2Unit(b7.updates,b8.updates));};N.EmbedView=function(b7){var b8;b8=bb.CreateEmbedNode();return N.Mk({$:2,$0:b8},w.Map(a.ignore,w.Bind(function(b9){bb.UpdateEmbedNode(b8,b9.docNode);return b9.updates;},b7)));};N.New=b3.Ctor(function(b7,b8){p.New.call(this);this.docNode=b7;this.updates=b8;},N);R.GetFields=function(b7){var b8,b9;b8=[];for(var b_ in b7)b8.push([b_,b7[b_]]);return b8;};R.GetFieldValues=function(b7){var b8,b9;b8=[];for(var b_ in b7)b8.push(b7[b_]);return b8;};S.NewFromSeq=function(b7){var b8,b9,b_;b8={};b9=_5.Get(b7);try{while(b9.MoveNext()){b_=b9.Current();b8[b_[0]]=b_[1];}}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}return b8;};U.notPresent=function(){return l.FailWith("The given key was not present in the dictionary.");};W=k.AggregateException=b3.Class({},V,W);W.New$3=b3.Ctor(function(b7){W.New$4.call(this,"One or more errors occurred.",b7);},W);W.New$4=b3.Ctor(function(b7,b8){this.message=b7;T.setPrototypeOf(this,W.prototype);this.innerExceptions=b8;},W);X.Start=function(b7,b8){var b9,b_;b9=(b_=(X.defCTS())[0],b8==null?b_:b8.$0);X.scheduler().Fork(function(){if(!b9.c)b7(bg.New(function(b$){if(b$.$==1)X.UncaughtAsyncError(b$.$0);},b9));});};X.Delay=function(b7){return function(b8){try{(b7(null))(b8);}catch(b9){b8.k({$:1,$0:b9});}};};X.Bind=function(b7,b8){return X.checkCancel(function(b9){b7(bg.New(function(b_){var b$;if(b_.$==0){b$=b_.$0;X.scheduler().Fork(function(){try{(b8(b$))(b9);}catch(ca){b9.k({$:1,$0:ca});}});}else X.scheduler().Fork(function(){b9.k(b_);});},b9.ct));});};X.Sleep=function(b7){return function(b8){var b9,b_;b9=void 0;b_=void 0;b9=a.setTimeout(function(){b_.Dispose();X.scheduler().Fork(function(){b8.k({$:0,$0:null});});},b7);b_=X.Register(b8.ct,function(){a.clearTimeout(b9);X.scheduler().Fork(function(){X.cancel(b8);});});};};X.Return=function(b7){return function(b8){b8.k({$:0,$0:b7});};};X.StartChild=function(b7,b8){return function(b9){var b_,b$,ca,cb;b_=[true];b$=[null];ca=[];cb=b8!=null&&b8.$==1?{$:1,$0:a.setTimeout(function(){var cc;b_[0]=false;cc={$:1,$0:new bj.New()};while(ca.length>0)(ca.shift())(cc);},b8.$0)}:null;X.scheduler().Fork(function(){if(!b9.ct.c)b7(bg.New(function(cc){if(b_[0]){b$[0]={$:1,$0:cc};cb!=null&&cb.$==1?a.clearTimeout(cb.$0):void 0;while(ca.length>0)(ca.shift())(cc);}},b9.ct));});b9.k({$:0,$0:function(cc){var cd;if(b_[0]){cd=b$[0];cd==null?ca.push(cc.k):cc.k(cd.$0);}else cc.k({$:1,$0:new bj.New()});}});};};X.Zero=function(){bn.$cctor();return bn.Zero;};X.Parallel=function(b7){var b8;b8=n.ofSeq(b7);return n.length(b8)===0?X.Return([]):function(b9){var b_,b$,ca;function cb(cc,cd){var ce,cf;cf=b$[0];switch(cf===0?0:cf===1?cd.$==0?1:(ce=[cf,cd],3):cd.$==0?2:(ce=[cf,cd],3)){case 0:return null;case 1:n.set(ca,cc,cd.$0);b$[0]=0;return b9.k({$:0,$0:ca});case 2:n.set(ca,cc,cd.$0);{b$[0]=cf-1;return;}break;case 3:b$[0]=0;return b9.k(ce[1]);}}b_=b8.length;b$=[b_];ca=new a.Array(b_);n.iteri(function(cc,cd){return X.scheduler().Fork(function(){cd(bg.New(function(ce){return cb(cc,ce);},b9.ct));});},b8);};};X.defCTS=function(){bn.$cctor();return bn.defCTS;};X.UncaughtAsyncError=function(b7){b0.log("WebSharper: Uncaught asynchronous exception",b7);};X.checkCancel=function(b7){return function(b8){if(b8.ct.c)X.cancel(b8);else b7(b8);};};X.Register=function(b7,b8){var b9;return b7===X.noneCT()?{Dispose:function(){return null;}}:(b9=b7.r.push(b8)-1,{Dispose:function(){return n.set(b7.r,b9,a.ignore);}});};X.cancel=function(b7){b7.k({$:2,$0:new bs.New(b7.ct)});};X.FromContinuations=function(b7){return function(b8){var b9;function b_(b$){if(b9[0])l.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b9[0]=true;X.scheduler().Fork(b$);}}b9=[false];b7(function(b$){b_(function(){b8.k({$:0,$0:b$});});},function(b$){b_(function(){b8.k({$:1,$0:b$});});},function(b$){b_(function(){b8.k({$:2,$0:b$});});});};};X.scheduler=function(){bn.$cctor();return bn.scheduler;};X.noneCT=function(){bn.$cctor();return bn.noneCT;};X.StartWithContinuations=function(b7,b8,b9,b_,b$){var ca,cb;ca=(cb=(X.defCTS())[0],b$==null?cb:b$.$0);!ca.c?b7(bg.New(function(cc){if(cc.$==1)b9(cc.$0);else if(cc.$==2)b_(cc.$0);else b8(cc.$0);},ca)):void 0;};Y=t.ConcreteVar=b3.Class({get_View:function(){return this.view;},Set:function(b7){if(this.isConst)(function(b8){return b8("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b8){b0.log(b8);}));else{Z.Obsolete(this.snap);this.current=b7;this.snap=Z.New({$:2,$0:b7,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(b7){var b8;b8=b7(this.Get());b8!=null&&b8.$==1?this.Set(b8.$0):void 0;}},v,Y);Y.New=b3.Ctor(function(b7,b8,b9){var b_;b_=this;v.New.call(this);this.isConst=b7;this.current=b9;this.snap=b8;this.view=function(){return b_.snap;};this.id=bh.Int();},Y);Z.WhenRun=function(b7,b8,b9){var b_;b_=b7.s;b_==null?b9():b_!=null&&b_.$==2?(b_.$1.push(b9),b8(b_.$0)):b_!=null&&b_.$==3?(b_.$0.push(b8),b_.$1.push(b9)):b8(b_.$0);};Z.Map=function(b7,b8){var b9,b_;b9=b8.s;return b9!=null&&b9.$==0?Z.New({$:0,$0:b7(b9.$0)}):(b_=Z.New({$:3,$0:[],$1:[]}),(Z.When(b8,function(b$){Z.MarkDone(b_,b8,b7(b$));},b_),b_));};Z.MapAsync=function(b7,b8){var b9;b9=Z.New({$:3,$0:[],$1:[]});Z.When(b8,function(b_){_1.StartTo(b7(b_),function(b$){Z.MarkDone(b9,b8,b$);});},b9);return b9;};Z.Map2=function(b7,b8,b9){var b_,b$,ca;function cb(cc){var cd,ce,cf;if(!(cd=ca.s,cd!=null&&cd.$==0||cd!=null&&cd.$==2)){ce=Z.ValueAndForever(b8);cf=Z.ValueAndForever(b9);ce!=null&&ce.$==1?cf!=null&&cf.$==1?ce.$0[1]&&cf.$0[1]?Z.MarkForever(ca,b7(ce.$0[0],cf.$0[0])):Z.MarkReady(ca,b7(ce.$0[0],cf.$0[0])):void 0:void 0;}}b_=b8.s;b$=b9.s;return b_!=null&&b_.$==0?b$!=null&&b$.$==0?Z.New({$:0,$0:b7(b_.$0,b$.$0)}):Z.Map2Opt1(b7,b_.$0,b9):b$!=null&&b$.$==0?Z.Map2Opt2(b7,b$.$0,b8):(ca=Z.New({$:3,$0:[],$1:[]}),(Z.When(b8,cb,ca),Z.When(b9,cb,ca),ca));};Z.WhenObsoleteRun=function(b7,b8){var b9;b9=b7.s;b9==null?b8():b9!=null&&b9.$==2?b9.$1.push(b8):b9!=null&&b9.$==3?b9.$1.push(b8):void 0;};Z.When=function(b7,b8,b9){var b_;b_=b7.s;b_==null?Z.Obsolete(b9):b_!=null&&b_.$==2?(Z.EnqueueSafe(b_.$1,b9),b8(b_.$0)):b_!=null&&b_.$==3?(b_.$0.push(b8),Z.EnqueueSafe(b_.$1,b9)):b8(b_.$0);};Z.MarkDone=function(b7,b8,b9){var b_;if(b_=b8.s,b_!=null&&b_.$==0)Z.MarkForever(b7,b9);else Z.MarkReady(b7,b9);};Z.Map2Opt1=function(b7,b8,b9){return Z.Map(function(b_){return b7(b8,b_);},b9);};Z.Map2Opt2=function(b7,b8,b9){return Z.Map(function(b_){return b7(b_,b8);},b9);};Z.ValueAndForever=function(b7){var b8;b8=b7.s;return b8!=null&&b8.$==0?{$:1,$0:[b8.$0,true]}:b8!=null&&b8.$==2?{$:1,$0:[b8.$0,false]}:null;};Z.MarkForever=function(b7,b8){var b9,b_,b$,ca;b9=b7.s;if(b9!=null&&b9.$==3){b7.s={$:0,$0:b8};b_=b9.$0;for(b$=0,ca=n.length(b_)-1;b$<=ca;b$++)(n.get(b_,b$))(b8);}else void 0;};Z.MarkReady=function(b7,b8){var b9,b_,b$,ca;b9=b7.s;if(b9!=null&&b9.$==3){b7.s={$:2,$0:b8,$1:b9.$1};b_=b9.$0;for(b$=0,ca=n.length(b_)-1;b$<=ca;b$++)(n.get(b_,b$))(b8);}else void 0;};Z.EnqueueSafe=function(b7,b8){var b9,b_,b$,ca;b7.push(b8);if(b7.length%20===0){b9=b7.slice(0);bP.Clear(b7);for(b_=0,b$=n.length(b9)-1;b_<=b$;b_++){ca=n.get(b9,b_);typeof ca=="object"?function(cb){if(cb.s)b7.push(cb);}(ca):function(cb){b7.push(cb);}(ca);}}else void 0;};Z.Map2Unit=function(b7,b8){var b9,b_,b$;function ca(){var cb,cc,cd;if(!(cb=b$.s,cb!=null&&cb.$==0||cb!=null&&cb.$==2)){cc=Z.ValueAndForever(b7);cd=Z.ValueAndForever(b8);cc!=null&&cc.$==1?cd!=null&&cd.$==1?cc.$0[1]&&cd.$0[1]?Z.MarkForever(b$,null):Z.MarkReady(b$,null):void 0:void 0;}}b9=b7.s;b_=b8.s;return b9!=null&&b9.$==0?b_!=null&&b_.$==0?Z.New({$:0,$0:null}):b8:b_!=null&&b_.$==0?b7:(b$=Z.New({$:3,$0:[],$1:[]}),(Z.When(b7,ca,b$),Z.When(b8,ca,b$),b$));};Z.Copy=function(b7){var b8,b9,b_;b8=b7.s;return b8==null?b7:b8!=null&&b8.$==2?(b9=Z.New({$:2,$0:b8.$0,$1:[]}),(Z.WhenObsolete(b7,b9),b9)):b8!=null&&b8.$==3?(b_=Z.New({$:3,$0:[],$1:[]}),(Z.When(b7,function(b$){Z.MarkDone(b_,b7,b$);},b_),b_)):b7;};Z.Join=function(b7){var b8;b8=Z.New({$:3,$0:[],$1:[]});Z.When(b7,function(b9){var b_;b_=b9();Z.When(b_,function(b$){var ca,cb;if((ca=b_.s,ca!=null&&ca.$==0)&&(cb=b7.s,cb!=null&&cb.$==0))Z.MarkForever(b8,b$);else Z.MarkReady(b8,b$);},b8);},b8);return b8;};Z.WhenObsolete=function(b7,b8){var b9;b9=b7.s;b9==null?Z.Obsolete(b8):b9!=null&&b9.$==2?Z.EnqueueSafe(b9.$1,b8):b9!=null&&b9.$==3?Z.EnqueueSafe(b9.$1,b8):void 0;};_1.StartTo=function(b7,b8){X.StartWithContinuations(b7,b8,function(b9){_1.OnError(b9);},a.ignore,null);};_1.OnError=function(b7){return b0.log("WebSharper UI: Uncaught asynchronous exception",b7);};_2.TryParseInt32=function(b7,b8){return _2.TryParse(b7,-2147483648,2147483647,b8);};_2.TryParseInt64=function(b7,b8){return _2.TryParse(b7,-9223372036854775808,9223372036854775807,b8);};_4.TryParse=function(b7,b8){try{b8.set(_4.Parse(b7));return true;}catch(b9){return false;}};_4.Parse=function(b7){var b8,b9,b_;try{return _4.ParseExact(b7,"D");}catch(b$){try{b8=_4.ParseExact(b7,"B");}catch(ca){try{b9=_4.ParseExact(b7,"P");}catch(cb){try{b_=_4.ParseExact(b7,"N");}catch(cc){b_=_4.ParseExact(b7,"X");}b9=b_;}b8=b9;}return b8;}};_4.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(b7){var b8,b9;b8=b6.random()*16|0;b9=b7=="x"?b8:b8&3|8;return b9.toString(16);});};_4.ParseExact=function(b7,b8){var b9,b_,b$,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck;function ca(cl){var cm,cn,co,cp;for(cm=0,cn=35;cm<=cn;cm++){cm===8||(cm===13||(cm===18||cm===23))?cl[cm]!=="-"?_4.ShapeError():void 0:(cp=cl[cm],!("0"<=cp&&cp<="9"||"a"<=cp&&cp<="f")?_4.ShapeError():void 0);}return cl;}cb=b8.toUpperCase();if(cb==="N"){cc=D.Trim(b7).toLowerCase();if(cc.length!==32)_4.ShapeError();for(cd=0,ce=31;cd<=ce;cd++){cf=cc[cd];!("0"<=cf&&cf<="9"||"a"<=cf&&cf<="f")?_4.ShapeError():void 0;}return D.Substring(cc,0,8)+"-"+D.Substring(cc,8,4)+"-"+D.Substring(cc,12,4)+"-"+D.Substring(cc,16,4)+"-"+cc.substring(20);}else if(cb==="D"){b9=D.Trim(b7).toLowerCase();b9.length!==36?_4.ShapeError():void 0;return ca(b9);}else if(cb==="B"){b_=D.Trim(b7).toLowerCase();b_.length!==38||b_[0]!=="{"||b_[17]!=="}"?_4.ShapeError():void 0;return ca(D.Substring(b_,1,36));}else if(cb==="P"){b$=D.Trim(b7).toLowerCase();b$.length!==38||b$[0]!=="("||b$[17]!==")"?_4.ShapeError():void 0;return ca(D.Substring(b$,1,36));}else if(cb==="X"){cg=D.Trim(b7).toLowerCase();if(cg.length!==68)_4.ShapeError();for(ch=0,ci=67;ch<=ci;ch++){switch(ch){case 26:case 0:if(cg[ch]!=="{")_4.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cg[ch]!=="0")_4.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cg[ch]!=="x")_4.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cg[ch]!==",")_4.ShapeError();break;case 67:case 66:if(cg[ch]!=="{")_4.ShapeError();break;default:ck=cg[ch];!("0"<=ck&&ck<="9"||"a"<=ck&&ck<="f")?_4.ShapeError():void 0;break;}}return D.Substring(cg,3,8)+"-"+D.Substring(cg,14,4)+"-"+D.Substring(cg,21,4)+"-"+D.Substring(cg,29,2)+D.Substring(cg,34,2)+"-"+D.Substring(cg,39,2)+D.Substring(cg,44,2)+D.Substring(cg,49,2)+D.Substring(cg,54,2)+D.Substring(cg,59,2)+D.Substring(cg,64,2);}else return _4.FormatError();};_4.ShapeError=function(){throw new bM.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};_4.FormatError=function(){throw new bM.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};_5.Get=function(b7){return b7 instanceof a.Array?_5.ArrayEnumerator(b7):o.Equals(typeof b7,"string")?_5.StringEnumerator(b7):b7.GetEnumerator();};_5.ArrayEnumerator=function(b7){return new _6.New(0,null,function(b8){var b9;b9=b8.s;return b9<n.length(b7)&&(b8.c=n.get(b7,b9),b8.s=b9+1,true);},void 0);};_5.StringEnumerator=function(b7){return new _6.New(0,null,function(b8){var b9;b9=b8.s;return b9<b7.length&&(b8.c=b7[b9],b8.s=b9+1,true);},void 0);};_5.Get0=function(b7){return b7 instanceof a.Array?_5.ArrayEnumerator(b7):o.Equals(typeof b7,"string")?_5.StringEnumerator(b7):"GetEnumerator0"in b7?b7.GetEnumerator0():b7.GetEnumerator();};_6=_5.T=b3.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},p,_6);_6.New=b3.Ctor(function(b7,b8,b9,b_){p.New.call(this);this.s=b7;this.c=b8;this.n=b9;this.d=b_;},_6);_8.AsyncMap=function(b7,b8){var b9;b9=null;return X.Delay(function(){return X.Bind(b7,function(b_){return X.Return(b8(b_));});});};_9.randomFunctionName=function(){var b7;return D.ReplaceChar((b7=_4.NewGuid(),a.String(b7)).toLowerCase(),"-","_");};_.fromSeq=function(b7){var b8;b8=n.ofSeq(y.delay(function(){return y.collect(function(b9){return[bl.New(b9[0],b9[1])];},y.distinctBy(function(b9){return b9[0];},b7));}));n.sortInPlace(b8);return bk.Build(b8,0,b8.length-1);};$=t.AttrProxy=b3.Class({},null,$);$.Create=function(b7,b8){return bo.Static(function(b9){bp.SetAttr(b9,b7,b8);});};$.Concat=function(b7){var b8;b8=ba.ofSeqNonCopying(b7);return ba.TreeReduce(bo.EmptyAttr(),$.Append,b8);};$.Append=function(b7,b8){return bo.AppendTree(b7,b8);};ba.MapTreeReduce=function(b7,b8,b9,b_){var b$;function ca(cb,cc){var cd,ce;return cc<=0?b8:cc===1&&(cb>=0&&cb<b$)?b7(n.get(b_,cb)):(ce=cc/2>>0,b9(ca(cb,ce),ca(cb+ce,cc-ce)));}b$=n.length(b_);return ca(0,b$);};ba.ofSeqNonCopying=function(b7){var b8,b9;if(b7 instanceof a.Array)return b7;else if(b7 instanceof A)return n.ofList(b7);else if(b7===null)return[];else{b8=[];b9=_5.Get(b7);try{while(b9.MoveNext())b8.push(b9.Current());return b8;}finally{if(typeof b9=="object"&&"Dispose"in b9)b9.Dispose();}}};ba.TreeReduce=function(b7,b8,b9){var b_;function b$(ca,cb){var cc,cd;return cb<=0?b7:cb===1&&(ca>=0&&ca<b_)?n.get(b9,ca):(cd=cb/2>>0,b8(b$(ca,cd),b$(ca+cd,cb-cd)));}b_=n.length(b9);return b$(0,b_);};ba.mapInPlace=function(b7,b8){var b9,b_;for(b9=0,b_=b8.length-1;b9<=b_;b9++)b8[b9]=b7(b8[b9]);return b8;};bb.CreateElemNode=function(b7,b8,b9){var b_;bb.LinkElement(b7,b9);b_=bo.Insert(b7,b8);return bq.New(b_,b9,null,b7,bh.Int(),b3.GetOptional(b_.OnAfterRender));};bb.CreateTextNode=function(){return{Text:bp.CreateText(""),Dirty:false,Value:""};};bb.UpdateTextNode=function(b7,b8){b7.Value=b8;b7.Dirty=true;};bb.LinkElement=function(b7,b8){bb.InsertDoc(b7,b8,null);};bb.InsertDoc=function(b7,b8,b9){var b_;return b8!=null&&b8.$==1?bb.InsertNode(b7,b8.$0.El,b9):b8!=null&&b8.$==2?(b_=b8.$0,(b_.Dirty=false,bb.InsertDoc(b7,b_.Current,b9))):b8==null?b9:b8!=null&&b8.$==4?bb.InsertNode(b7,b8.$0.Text,b9):b8!=null&&b8.$==5?bb.InsertNode(b7,b8.$0,b9):b8!=null&&b8.$==6?n.foldBack(function(b$,ca){return b$==null||b$.constructor===T?bb.InsertDoc(b7,b$,ca):bb.InsertNode(b7,b$,ca);},b8.$0.Els,b9):bb.InsertDoc(b7,b8.$0,bb.InsertDoc(b7,b8.$1,b9));};bb.CreateRunState=function(b7,b8){return bI.New(bJ.get_Empty(),bb.CreateElemNode(b7,bo.EmptyAttr(),b8));};bb.PerformAnimatedUpdate=function(b7,b8,b9){var b_;return bz.get_UseAnimations()?(b_=null,X.Delay(function(){var b$,ca,cb;b$=bJ.FindAll(b9);ca=bb.ComputeChangeAnim(b8,b$);cb=bb.ComputeEnterAnim(b8,b$);return X.Bind(bz.Play(bz.Append(ca,bb.ComputeExitAnim(b8,b$))),function(){return X.Bind(bb.SyncElemNodesNextFrame(b7,b8),function(){return X.Bind(bz.Play(cb),function(){b8.PreviousNodes=b$;return X.Return(null);});});});})):bb.SyncElemNodesNextFrame(b7,b8);};bb.PerformSyncUpdate=function(b7,b8,b9){var b_;b_=bJ.FindAll(b9);bb.SyncElemNode(b7,b8.Top);b8.PreviousNodes=b_;};bb.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bb.UpdateEmbedNode=function(b7,b8){b7.Current=b8;b7.Dirty=true;};bb.InsertNode=function(b7,b8,b9){bp.InsertAt(b7,b9,b8);return b8;};bb.SyncElemNodesNextFrame=function(b7,b8){function b9(b_){a.requestAnimationFrame(function(){bb.SyncElemNode(b7,b8.Top);b_();});}return bA.BatchUpdatesEnabled()?X.FromContinuations(function(b_,b$,ca){return b9.apply(null,[b_,b$,ca]);}):(bb.SyncElemNode(b7,b8.Top),X.Return(null));};bb.ComputeExitAnim=function(b7,b8){return bz.Concat(n.map(function(b9){return bo.GetExitAnim(b9.Attr);},bJ.ToArray(bJ.Except(b8,bJ.Filter(function(b9){return bo.HasExitAnim(b9.Attr);},b7.PreviousNodes)))));};bb.ComputeEnterAnim=function(b7,b8){return bz.Concat(n.map(function(b9){return bo.GetEnterAnim(b9.Attr);},bJ.ToArray(bJ.Except(b7.PreviousNodes,bJ.Filter(function(b9){return bo.HasEnterAnim(b9.Attr);},b8)))));};bb.ComputeChangeAnim=function(b7,b8){var b9;function b_(b$){return bo.HasChangeAnim(b$.Attr);}b9=function(b$){return bJ.Filter(b_,b$);};return bz.Concat(n.map(function(b$){return bo.GetChangeAnim(b$.Attr);},bJ.ToArray(bJ.Intersect(b9(b7.PreviousNodes),b9(b8)))));};bb.SyncElemNode=function(b7,b8){!b7?bb.SyncElement(b8):void 0;bb.Sync(b8.Children);bb.AfterRender(b8);};bb.SyncElement=function(b7){function b8(b9){function b_(b$){var ca,cb;return b$!=null&&b$.$==0?b_(b$.$0)||b_(b$.$1):b$!=null&&b$.$==2?(ca=b$.$0,ca.Dirty||b_(ca.Current)):b$!=null&&b$.$==6&&(cb=b$.$0,cb.Dirty||n.exists(b8,cb.Holes));}return b_(b9.Children);}bo.Sync(b7.El,b7.Attr);b8(b7)?bb.DoSyncElement(b7):void 0;};bb.Sync=function(b7){var b8,b9;if(b7!=null&&b7.$==1)bb.SyncElemNode(false,b7.$0);else if(b7!=null&&b7.$==2)bb.Sync(b7.$0.Current);else if(b7==null);else if(b7!=null&&b7.$==5);else if(b7!=null&&b7.$==4){b8=b7.$0;b8.Dirty?(b8.Text.nodeValue=b8.Value,b8.Dirty=false):void 0;}else if(b7!=null&&b7.$==6){b9=b7.$0;n.iter(function(b_){bb.SyncElemNode(false,b_);},b9.Holes);n.iter(function(b_){bo.Sync(b_[0],b_[1]);},b9.Attrs);bb.AfterRender(b9);}else{bb.Sync(b7.$0);bb.Sync(b7.$1);}};bb.AfterRender=function(b7){var b8;b8=b3.GetOptional(b7.Render);b8!=null&&b8.$==1?(b8.$0(b7.El),b3.SetOptional(b7,"Render",null)):void 0;};bb.DoSyncElement=function(b7){var b8,b9,b_;function b$(ca,cb){var cc,cd;return ca!=null&&ca.$==1?ca.$0.El:ca!=null&&ca.$==2?(cc=ca.$0,cc.Dirty?(cc.Dirty=false,bb.InsertDoc(b8,cc.Current,cb)):b$(cc.Current,cb)):ca==null?cb:ca!=null&&ca.$==4?ca.$0.Text:ca!=null&&ca.$==5?ca.$0:ca!=null&&ca.$==6?(cd=ca.$0,(cd.Dirty?cd.Dirty=false:void 0,n.foldBack(function(ce,cf){return ce==null||ce.constructor===T?b$(ce,cf):ce;},cd.Els,cb))):b$(ca.$0,b$(ca.$1,cb));}b8=b7.El;bV.Iter((b9=b7.El,function(ca){bp.RemoveNode(b9,ca);}),bV.Except(bV.DocChildren(b7),bV.Children(b7.El,b3.GetOptional(b7.Delimiters))));b$(b7.Children,(b_=b3.GetOptional(b7.Delimiters),b_!=null&&b_.$==1?b_.$0[1]:null));};bd.LoadLocalTemplates=function(b7){!bd.LocalTemplatesLoaded()?(bd.set_LocalTemplatesLoaded(true),bd.LoadNestedTemplates(self.document.body,"")):void 0;bd.LoadedTemplates().set_Item(b7,bd.LoadedTemplateFile(""));};bd.LocalTemplatesLoaded=function(){by.$cctor();return by.LocalTemplatesLoaded;};bd.set_LocalTemplatesLoaded=function(b7){by.$cctor();by.LocalTemplatesLoaded=b7;};bd.LoadNestedTemplates=function(b7,b8){var b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;function b9(cm){var cn,co;if(!b_.ContainsKey(cm)){cn=(co=null,[b$.TryGetValue(cm,{get:function(){return co;},set:function(cp){co=cp;}}),co]);cn[0]?(cl.Add(cm),b$.Remove(cm),bd.PrepareTemplateStrict(b8,{$:1,$0:cm},cn[1][0],{$:1,$0:cn[1][1]},{$:1,$0:b9})):b0.warn(cl.Contains(cm)?"Encountered loop when instantiating "+cm:"Local template does not exist: "+cm);}}b_=bd.LoadedTemplateFile(b8);b$=new r.New$5();ca=b7.querySelectorAll("[ws-template]");for(cb=0,cc=ca.length-1;cb<=cc;cb++){cd=ca[cb];ce=cd.getAttribute("ws-template").toLowerCase();cd.removeAttribute("ws-template");b$.set_Item(ce,[[cd],bd.FakeRootSingle(cd)]);}cf=b7.querySelectorAll("[ws-children-template]");for(cg=0,ch=cf.length-1;cg<=ch;cg++){ci=cf[cg];cj=ci.getAttribute("ws-children-template").toLowerCase();ci.removeAttribute("ws-children-template");b$.set_Item(cj,(ck=bp.ChildrenArray(ci),[ck,bd.FakeRoot(ck)]));}cl=new bt.New$3();while(b$.count>0)b9(y.head(b$.get_Keys()));};bd.LoadedTemplates=function(){by.$cctor();return by.LoadedTemplates;};bd.LoadedTemplateFile=function(b7){var b8,b9,b_;b8=(b9=null,[bd.LoadedTemplates().TryGetValue(b7,{get:function(){return b9;},set:function(b$){b9=b$;}}),b9]);return b8[0]?b8[1]:(b_=new r.New$5(),(bd.LoadedTemplates().set_Item(b7,b_),b_));};bd.FakeRootSingle=function(b7){var b8,b9,b_;b7.removeAttribute("ws-template");b8=b7.getAttribute("ws-replace");b8===null?void 0:(b7.removeAttribute("ws-replace"),b9=b7.parentNode,o.Equals(b9,null)?void 0:(b_=self.document.createElement(b7.tagName),b_.setAttribute("ws-replace",b8),b9.replaceChild(b_,b7)));return bd.FakeRoot([b7]);};bd.FakeRoot=function(b7){var b8,b9,b_;b8=self.document.createElement("div");for(b9=0,b_=b7.length-1;b9<=b_;b9++)b8.appendChild(n.get(b7,b9));return b8;};bd.PrepareTemplateStrict=function(b7,b8,b9,b_,b$){var ca,cb;function cc(ch,ci){var cj,ck,cl,cm,cn,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ;function co(cK){}while(true)switch(ch){case 0:if(ci!==null){cj=ci.nextSibling;if(o.Equals(ci.nodeType,P.TEXT_NODE))bF.convertTextNode(ci);else if(o.Equals(ci.nodeType,P.ELEMENT_NODE))ce(ci);ci=cj;}else return null;break;case 1:cp=C.string(ci.nodeName,{$:1,$0:3},null).toLowerCase();cq=(ck=cp.indexOf("."),ck===-1?[b7,cp]:[C.string(cp,null,{$:1,$0:ck-1}),C.string(cp,{$:1,$0:ck+1},null)]);cr=cq[1];cs=cq[0];if(cs!==""&&!bd.LoadedTemplates().ContainsKey(cs))return bF.failNotLoaded(cr);else{if(cs===""&&b$!=null)b$.$0(cr);ct=bd.LoadedTemplates().get_Item(cs);if(!ct.ContainsKey(cr))return bF.failNotLoaded(cr);else{cu=ct.get_Item(cr);cv=cu.cloneNode(true);cw=new bt.New$3();cx=new r.New$5();cy=ci.attributes;for(cz=0,cA=cy.length-1;cz<=cA;cz++){cB=cy.item(cz).name.toLowerCase();cx.set_Item(cB,(cC=cy.item(cz).nodeValue,cC===""?cB:cC.toLowerCase()));!cw.Add(cB)?b0.warn("Hole mapped twice",cB):void 0;}for(cD=0,cE=ci.childNodes.length-1;cD<=cE;cD++){cF=ci.childNodes[cD];o.Equals(cF.nodeType,P.ELEMENT_NODE)?!cw.Add(cF.nodeName.toLowerCase())?b0.warn("Hole filled twice",cr):void 0:void 0;}cG=ci.childNodes.length===1&&o.Equals(ci.firstChild.nodeType,P.TEXT_NODE);if(cG){cm=bF.fillTextHole(cv,ci.firstChild.textContent,cr);((function(cK){return function(cL){if(cL!=null)cK(cL.$0);};}((cn=function(cK){return function(cL){return cK.Add(cL);};}(cw),function(cK){return co(cn(cK));})))(cm));}bF.removeHolesExcept(cv,cw);if(!cG){for(cH=0,cI=ci.childNodes.length-1;cH<=cI;cH++){cJ=ci.childNodes[cH];o.Equals(cJ.nodeType,P.ELEMENT_NODE)?cJ.hasAttributes()?bF.fillInstanceAttrs(cv,cJ):cd(cv,cJ):void 0;}}bF.mapHoles(cv,cx);bF.fill(cv,ci.parentNode,ci);ci.parentNode.removeChild(ci);return;}}break;}}function cd(ch,ci){var cj,cl,cm;function ck(cn,co){var cp,cq,cr;if(cl==="title"&&ci.hasChildNodes()){cp=b5.parseHTML(ci.textContent);ci.removeChild(ci.firstChild);for(cq=0,cr=cp.length-1;cq<=cr;cq++)ci.appendChild(n.get(cp,cq));}else null;ce(ci);return bF.fill(ci,cn,co);}cl=ci.nodeName.toLowerCase();bp.IterSelector(ch,"[ws-attr-holes]",function(cn){var co,cp,cq,cr,cs;co=D.SplitChars(cn.getAttribute("ws-attr-holes"),[" "],1);for(cp=0,cq=co.length-1;cp<=cq;cp++){cr=n.get(co,cp);cn.setAttribute(cr,(cs=new a.RegExp("\\${"+cl+"}","ig"),cn.getAttribute(cr).replace(cs,ci.textContent)));}});cm=ch.querySelector("[ws-hole="+cl+"]");if(o.Equals(cm,null)){cj=ch.querySelector("[ws-replace="+cl+"]");return o.Equals(cj,null)?null:(ck(cj.parentNode,cj),void cj.parentNode.removeChild(cj));}else{while(cm.hasChildNodes())cm.removeChild(cm.lastChild);cm.removeAttribute("ws-hole");return ck(cm,null);}}function ce(ch){if(D.StartsWith(ch.nodeName.toLowerCase(),"ws-"))cg(ch);else{bF.convertAttrs(ch);cf(ch.firstChild);}}function cf(ch){return cc(0,ch);}function cg(ch){return cc(1,ch);}ca=b_==null?bd.FakeRoot(b9):b_.$0;cb=(b8==null?"":b8.$0).toLowerCase();bd.LoadedTemplateFile(b7).set_Item(cb,ca);n.length(b9)>0?(function(ch){var ci,cj,ck,cl;while(true){ci=ch.querySelector("[ws-template]");if(o.Equals(ci,null)){cj=ch.querySelector("[ws-children-template]");if(o.Equals(cj,null))return null;else{ck=cj.getAttribute("ws-children-template");cj.removeAttribute("ws-children-template");bd.PrepareTemplateStrict(b7,{$:1,$0:ck},bp.ChildrenArray(cj),null,null);ch=ch;}}else{cl=ci.getAttribute("ws-template");(bd.PrepareSingleTemplate(b7,{$:1,$0:cl},ci))(null);ch=ch;}}}(ca),cf(n.get(b9,0))):void 0;};bd.PrepareSingleTemplate=function(b7,b8,b9){var b_,b$,ca;b_=bd.FakeRootSingle(b9);b$=[b9];ca={$:1,$0:b_};return function(cb){bd.PrepareTemplateStrict(b7,b8,b$,ca,cb);};};bd.TextHoleRE=function(){by.$cctor();return by.TextHoleRE;};bf.New=function(b7,b8){return{c:b7,r:b8};};bg.New=function(b7,b8){return{k:b7,ct:b8};};bh.Int=function(){bh.set_counter(bh.counter()+1);return bh.counter();};bh.set_counter=function(b7){bC.$cctor();bC.counter=b7;};bh.counter=function(){bC.$cctor();return bC.counter;};Z.Obsolete=function(b7){var b8,b9,b_,b$,ca;b9=b7.s;if(b9==null||(b9!=null&&b9.$==2?(b8=b9.$1,false):b9!=null&&b9.$==3?(b8=b9.$1,false):true))void 0;else{b7.s=null;for(b_=0,b$=n.length(b8)-1;b_<=b$;b_++){ca=n.get(b8,b_);typeof ca=="object"?function(cb){Z.Obsolete(cb);}(ca):ca();}}};Z.New=function(b7){return{s:b7};};bi.TryParse=function(b7){var b8;b8=b4.parse(b7);return a.isNaN(b8)?null:{$:1,$0:b8};};_2.TryParse=function(b7,b8,b9,b_){var b$,ca;b$=+b7;ca=b$===b$-b$%1&&b$>=b8&&b$<=b9;ca?b_.set(b$):void 0;return ca;};y.insufficient=function(){return l.FailWith("The input sequence has an insufficient number of elements.");};n.sortInPlaceByDescending=function(b7,b8){n.mapInPlace(function(b9){return b9[0];},n.mapiInPlace(function(b9,b_){return[b_,[b7(b_),b9]];},b8).sort(function(b9,b_){return-o.Compare(b9[1],b_[1]);}));};y.nonNegative=function(){return l.FailWith("The input must be non-negative.");};n.mapiInPlace=function(b7,b8){var b9,b_;for(b9=0,b_=b8.length-1;b9<=b_;b9++)b8[b9]=b7(b9,b8[b9]);return b8;};n.mapInPlace=function(b7,b8){var b9,b_;for(b9=0,b_=b8.length-1;b9<=b_;b9++)b8[b9]=b7(b8[b9]);};bj=k.TimeoutException=b3.Class({},V,bj);bj.New=b3.Ctor(function(){bj.New$1.call(this,"The operation has timed out.");},bj);bj.New$1=b3.Ctor(function(b7){this.message=b7;T.setPrototypeOf(this,bj.prototype);},bj);bk.TryFind=function(b7,b8){var b9;b9=(bk.Lookup(b7,b8))[0];return b9==null?null:{$:1,$0:b9.Node};};bk.Add=function(b7,b8){return bk.Put(function(b9,b_){return b_;},b7,b8);};bk.Lookup=function(b7,b8){var b9,b_,b$,ca;b9=[];b_=b8;b$=true;while(b$)if(b_==null)b$=false;else{ca=o.Compare(b7,b_.Node);ca===0?b$=false:ca===1?(b9.unshift([true,b_.Node,b_.Left]),b_=b_.Right):(b9.unshift([false,b_.Node,b_.Right]),b_=b_.Left);}return[b_,b9];};bk.Build=function(b7,b8,b9){var b_,b$,ca;return b9-b8+1<=0?null:(b_=(b8+b9)/2>>0,(b$=bk.Build(b7,b8,b_-1),(ca=bk.Build(b7,b_+1,b9),bk.Branch(n.get(b7,b_),b$,ca))));};bk.Put=function(b7,b8,b9){var b_,b$;b_=bk.Lookup(b8,b9);b$=b_[0];return b$==null?bk.Rebuild(b_[1],bk.Branch(b8,null,null)):bk.Rebuild(b_[1],bk.Branch(b7(b$.Node,b8),b$.Left,b$.Right));};bk.Branch=function(b7,b8,b9){var b_,b$;return bm.New(b7,b8,b9,1+(b_=b8==null?0:b8.Height,(b$=b9==null?0:b9.Height,o.Compare(b_,b$)===1?b_:b$)),1+(b8==null?0:b8.Count)+(b9==null?0:b9.Count));};bk.Rebuild=function(b7,b8){var b9,b$,ca,cb,cc,cd,ce,cf,cg,ch;function b_(ci){return ci==null?0:ci.Height;}b9=b8;for(b$=0,ca=n.length(b7)-1;b$<=ca;b$++){b9=(cb=n.get(b7,b$),cb[0]?(cc=cb[1],(cd=cb[2],b_(b9)>b_(cd)+1?b_(b9.Left)===b_(b9.Right)+1?(ce=b9.Left,bk.Branch(ce.Node,bk.Branch(cc,cd,ce.Left),bk.Branch(b9.Node,ce.Right,b9.Right))):bk.Branch(b9.Node,bk.Branch(cc,cd,b9.Left),b9.Right):bk.Branch(cc,cd,b9))):(cf=cb[1],(cg=cb[2],b_(b9)>b_(cg)+1?b_(b9.Right)===b_(b9.Left)+1?(ch=b9.Right,bk.Branch(ch.Node,bk.Branch(b9.Node,b9.Left,ch.Left),bk.Branch(cf,ch.Right,cg))):bk.Branch(b9.Node,b9.Left,bk.Branch(cf,b9.Right,cg)):bk.Branch(cf,b9,cg))));}return b9;};bk.Enumerate=function(b7,b8){function b9(b_,b$){var ca;while(true)if(b_==null)return b$.$==1?{$:1,$0:[b$.$0[0],[b$.$0[1],b$.$1]]}:null;else if(b7){ca=b_;b_=ca.Right;b$=new A({$:1,$0:[ca.Node,ca.Left],$1:b$});}else{ca=b_;b_=ca.Left;b$=new A({$:1,$0:[ca.Node,ca.Right],$1:b$});}}return y.unfold(function(b_){return b9(b_[0],b_[1]);},[b8,A.Empty]);};bl=q.Pair=b3.Class({Equals:function(b7){return o.Equals(this.Key,b7.Key);},GetHashCode:function(){return o.Hash(this.Key);},CompareTo0:function(b7){return o.Compare(this.Key,b7.Key);}},null,bl);bl.New=function(b7,b8){return new bl({Key:b7,Value:b8});};bm.New=function(b7,b8,b9,b_,b$){return{Node:b7,Left:b8,Right:b9,Height:b_,Count:b$};};bn.$cctor=function(){bn.$cctor=a.ignore;bn.noneCT=bf.New(false,[]);bn.scheduler=new br.New();bn.defCTS=[new s.New()];bn.Zero=X.Return();bn.GetCT=function(b7){b7.k({$:0,$0:b7.ct});};};bo.Static=function(b7){return new $({$:3,$0:b7});};bo.Insert=function(b7,b8){var b9,b_,b$;function ca(cb){if(!(cb===null))if(cb!=null&&cb.$==1)b9.push(cb.$0);else if(cb!=null&&cb.$==2){ca(cb.$0);ca(cb.$1);}else if(cb!=null&&cb.$==3)cb.$0(b7);else if(cb!=null&&cb.$==4)b_.push(cb.$0);}b9=[];b_=[];ca(b8);b$=b9.slice(0);return bw.New(b7,bo.Flags(b8),b$,b_.length===0?null:{$:1,$0:function(cb){y.iter(function(cc){cc(cb);},b_);}});};bo.EmptyAttr=function(){bx.$cctor();return bx.EmptyAttr;};bo.Flags=function(b7){return b7!==null&&b7.hasOwnProperty("flags")?b7.flags:0;};bo.AppendTree=function(b7,b8){var b9;return b7===null?b8:b8===null?b7:(b9=new $({$:2,$0:b7,$1:b8}),(bo.SetFlags(b9,bo.Flags(b7)|bo.Flags(b8)),b9));};bo.Dynamic=function(b7,b8){return new $({$:1,$0:new bO.New(b7,b8)});};bo.Updates=function(b7){return ba.MapTreeReduce(function(b8){return b8.NChanged();},w.Const(),w.Map2Unit,b7.DynNodes);};bo.SetFlags=function(b7,b8){b7.flags=b8;};bo.HasExitAnim=function(b7){var b8;b8=2;return(b7.DynFlags&b8)===b8;};bo.GetExitAnim=function(b7){return bo.GetAnim(b7,function(b8,b9){return b8.NGetExitAnim(b9);});};bo.HasEnterAnim=function(b7){var b8;b8=1;return(b7.DynFlags&b8)===b8;};bo.GetEnterAnim=function(b7){return bo.GetAnim(b7,function(b8,b9){return b8.NGetEnterAnim(b9);});};bo.HasChangeAnim=function(b7){var b8;b8=4;return(b7.DynFlags&b8)===b8;};bo.GetChangeAnim=function(b7){return bo.GetAnim(b7,function(b8,b9){return b8.NGetChangeAnim(b9);});};bo.GetAnim=function(b7,b8){return bz.Concat(n.map(function(b9){return b8(b9,b7.DynElem);},b7.DynNodes));};bo.Sync=function(b7,b8){n.iter(function(b9){b9.NSync(b7);},b8.DynNodes);};bp.AddClass=function(b7,b8){var b9;b9=bp.getClass(b7);b9===""?bp.setClass(b7,b8):!bp.clsRE(b8).test(b9)?bp.setClass(b7,b9+" "+b8):void 0;};bp.RemoveClass=function(b7,b8){var b9;bp.setClass(b7,(b9=bp.clsRE(b8),bp.getClass(b7).replace(b9,function(b_,b$,ca){return b$===""||ca===""?"":" ";})));};bp.CreateText=function(b7){return bp.Doc().createTextNode(b7);};bp.SetAttr=function(b7,b8,b9){b7.setAttribute(b8,b9);};bp.CreateElement=function(b7){return bp.Doc().createElement(b7);};bp.getClass=function(b7){return b7 instanceof a.SVGElement?b7.getAttribute("class"):b7.className;};bp.setClass=function(b7,b8){if(b7 instanceof a.SVGElement)b7.setAttribute("class",b8);else b7.className=b8;};bp.clsRE=function(b7){return new a.RegExp("(\\s+|^)"+b7+"(?:\\s+"+b7+")*(\\s+|$)","g");};bp.Doc=function(){bE.$cctor();return bE.Doc;};bp.ChildrenArray=function(b7){var b8,b9,b_;b8=[];for(b9=0,b_=b7.childNodes.length-1;b9<=b_;b9++)b8.push(b7.childNodes[b9]);return b8;};bp.IterSelector=function(b7,b8,b9){var b_,b$,ca;b_=b7.querySelectorAll(b8);for(b$=0,ca=b_.length-1;b$<=ca;b$++)b9(b_[b$]);};bp.InsertAt=function(b7,b8,b9){var b_;if(!(b9.parentNode===b7&&b8===(b_=b9.nextSibling,o.Equals(b_,null)?null:b_)))b7.insertBefore(b9,b8);};bp.RemoveNode=function(b7,b8){if(b8.parentNode===b7)b7.removeChild(b8);};w=t.View=b3.Class({},null,w);bq=t.DocElemNode=b3.Class({Equals:function(b7){return this.ElKey===b7.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bq);bq.New=function(b7,b8,b9,b_,b$,ca){var cb;return new bq((cb={Attr:b7,Children:b8,El:b_,ElKey:b$},(b3.SetOptional(cb,"Delimiters",b9),b3.SetOptional(cb,"Render",ca),cb)));};br=X.Scheduler=b3.Class({Fork:function(b7){var b8;b8=this;this.robin.push(b7);this.idle?(this.idle=false,a.setTimeout(function(){b8.tick();},0)):void 0;},tick:function(){var b7,b8,b9;b8=this;b9=b4.now();b7=true;while(b7)if(this.robin.length===0){this.idle=true;b7=false;}else{(this.robin.shift())();b4.now()-b9>40?(a.setTimeout(function(){b8.tick();},0),b7=false):void 0;}}},p,br);br.New=b3.Ctor(function(){p.New.call(this);this.idle=true;this.robin=[];},br);bs=k.OperationCanceledException=b3.Class({},V,bs);bs.New=b3.Ctor(function(b7){bs.New$1.call(this,"The operation was canceled.",null,b7);},bs);bs.New$1=b3.Ctor(function(b7,b8,b9){this.message=b7;this.inner=b8;T.setPrototypeOf(this,bs.prototype);this.ct=b9;},bs);bt=q.HashSet=b3.Class({Add:function(b7){return this.add(b7);},Contains:function(b7){var b8;b8=this.data[this.hash(b7)];return b8==null?false:this.arrContains(b7,b8);},add:function(b7){var b8,b9;b8=this.hash(b7);b9=this.data[b8];return b9==null?(this.data[b8]=[b7],this.count=this.count+1,true):this.arrContains(b7,b9)?false:(b9.push(b7),this.count=this.count+1,true);},arrContains:function(b7,b8){var b9,b_,b$,ca;b9=true;b_=0;ca=b8.length;while(b9&&b_<ca)if(this.equals.apply(null,[b8[b_],b7]))b9=false;else b_=b_+1;return!b9;},ExceptWith:function(b7){var b8;b8=_5.Get(b7);try{while(b8.MoveNext())this.Remove(b8.Current());}finally{if(typeof b8=="object"&&"Dispose"in b8)b8.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(b7){var b8,b9,b_,b$;b8=0;b9=bU.concat(this.data);for(b_=0,b$=b9.length-1;b_<=b$;b_++)n.set(b7,b_,b9[b_]);},IntersectWith:function(b7){var b8,b9,b_,b$,ca;b8=new bt.New$4(b7,this.equals,this.hash);b9=bU.concat(this.data);for(b_=0,b$=b9.length-1;b_<=b$;b_++){ca=b9[b_];!b8.Contains(ca)?this.Remove(ca):void 0;}},Remove:function(b7){var b8;b8=this.data[this.hash(b7)];return b8==null?false:this.arrRemove(b7,b8)&&(this.count=this.count-1,true);},arrRemove:function(b7,b8){var b9,b_,b$,ca;b9=true;b_=0;ca=b8.length;while(b9&&b_<ca)if(this.equals.apply(null,[b8[b_],b7])){b8.splice.apply(b8,[b_,1]);b9=false;}else b_=b_+1;return!b9;},GetEnumerator:function(){return _5.Get(bU.concat(this.data));},GetEnumerator0:function(){return _5.Get(bU.concat(this.data));}},p,bt);bt.New$3=b3.Ctor(function(){bt.New$4.call(this,[],o.Equals,o.Hash);},bt);bt.New$4=b3.Ctor(function(b7,b8,b9){var b_;p.New.call(this);this.equals=b8;this.hash=b9;this.data=[];this.count=0;b_=_5.Get(b7);try{while(b_.MoveNext())this.add(b_.Current());}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}},bt);bt.New$2=b3.Ctor(function(b7){bt.New$4.call(this,b7,o.Equals,o.Hash);},bt);bw.New=function(b7,b8,b9,b_){var b$;b$={DynElem:b7,DynFlags:b8,DynNodes:b9};b3.SetOptional(b$,"OnAfterRender",b_);return b$;};bx.$cctor=function(){bx.$cctor=a.ignore;bx.EmptyAttr=null;};by.$cctor=function(){by.$cctor=a.ignore;by.LoadedTemplates=new r.New$5();by.LocalTemplatesLoaded=false;by.TextHoleRE="\\${([^}]+)}";};bz.get_UseAnimations=function(){return bK.UseAnimations();};bz.Play=function(b7){var b8;b8=null;return X.Delay(function(){return X.Bind(bz.Run(a.ignore,bK.Actions(b7)),function(){bK.Finalize(b7);return X.Return(null);});});};bz.Append=function(b7,b8){return{$:0,$0:bR.Append(b7.$0,b8.$0)};};bz.Run=function(b7,b8){var b9;function b_(b$){function ca(cb,cc){var cd;cd=cc-cb;b8.Compute(cd);b7();return cd<=b9?void a.requestAnimationFrame(function(ce){ca(cb,ce);}):b$();}a.requestAnimationFrame(function(cb){ca(cb,cb);});}b9=b8.Duration;return b9===0?X.Zero():X.FromContinuations(function(b$,ca,cb){return b_.apply(null,[b$,ca,cb]);});};bz.Concat=function(b7){return{$:0,$0:bR.Concat(y.map(bK.List,b7))};};bz.get_Empty=function(){return{$:0,$0:bR.Empty()};};bA.BatchUpdatesEnabled=function(){bL.$cctor();return bL.BatchUpdatesEnabled;};bB.StartProcessor=function(b7){var b8;function b9(){var b_;b_=null;return X.Delay(function(){return X.Bind(b7,function(){var b$;b$=b8[0];return b$===1?(b8[0]=0,X.Zero()):b$===2?(b8[0]=1,b9()):X.Zero();});});}b8=[0];return function(){var b_;b_=b8[0];b_===0?(b8[0]=1,X.Start(b9(),null)):b_===1?b8[0]=2:void 0;};};bC.$cctor=function(){bC.$cctor=a.ignore;bC.counter=0;};bD=t.Elt=b3.Class({},N,bD);bD.New=function(b7,b8,b9){var b_,b$;b_=bb.CreateElemNode(b7,b8,b9.docNode);b$=bN.Create(b9.updates);return new bD.New$1({$:1,$0:b_},w.Map2Unit(bo.Updates(b_.Attr),b$.v),b7,b$);};bD.New$1=b3.Ctor(function(b7,b8,b9,b_){N.New.call(this,b7,b8);this.docNode$1=b7;this.updates$1=b8;this.elt=b9;this.rvUpdates=b_;},bD);bE.$cctor=function(){bE.$cctor=a.ignore;bE.Doc=self.document;};bF.convertTextNode=function(b7){var b8,b9,b_,b$,ca,cb;b8=null;b9=0;b$=b7.textContent;ca=new a.RegExp(bd.TextHoleRE(),"g");while(b8=ca.exec(b$),b8!==null){b7.parentNode.insertBefore(self.document.createTextNode(C.string(b$,{$:1,$0:b9},{$:1,$0:ca.lastIndex-n.get(b8,0).length-1})),b7);b9=ca.lastIndex;cb=self.document.createElement("span");cb.setAttribute("ws-replace",n.get(b8,1).toLowerCase());b7.parentNode.insertBefore(cb,b7);}ca.lastIndex=0;b7.textContent=C.string(b$,{$:1,$0:b9},null);};bF.failNotLoaded=function(b7){b0.warn("Instantiating non-loaded template",b7);};bF.fillTextHole=function(b7,b8,b9){var b_;b_=b7.querySelector("[ws-replace]");return o.Equals(b_,null)?(b0.warn("Filling non-existent text hole",b9),null):(b_.parentNode.replaceChild(new a.Text(b8),b_),{$:1,$0:b_.getAttribute("ws-replace")});};bF.removeHolesExcept=function(b7,b8){function b9(b_){bp.IterSelector(b7,"["+b_+"]",function(b$){if(!b8.Contains(b$.getAttribute(b_)))b$.removeAttribute(b_);});}b9("ws-attr");b9("ws-onafterrender");b9("ws-var");bp.IterSelector(b7,"[ws-hole]",function(b_){if(!b8.Contains(b_.getAttribute("ws-hole"))){b_.removeAttribute("ws-hole");while(b_.hasChildNodes())b_.removeChild(b_.lastChild);}});bp.IterSelector(b7,"[ws-replace]",function(b_){if(!b8.Contains(b_.getAttribute("ws-replace")))b_.parentNode.removeChild(b_);});bp.IterSelector(b7,"[ws-on]",function(b_){b_.setAttribute("ws-on",D.concat(" ",n.filter(function(b$){return b8.Contains(n.get(D.SplitChars(b$,[":"],1),1));},D.SplitChars(b_.getAttribute("ws-on"),[" "],1))));});bp.IterSelector(b7,"[ws-attr-holes]",function(b_){var b$,ca,cb,cc,cd;b$=D.SplitChars(b_.getAttribute("ws-attr-holes"),[" "],1);for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=n.get(b$,ca);b_.setAttribute(cc,(cd=new a.RegExp(bd.TextHoleRE(),"g"),b_.getAttribute(cc).replace(cd,function(ce,cf){return b8.Contains(cf)?ce:"";})));}});};bF.fillInstanceAttrs=function(b7,b8){var b9,b_,b$,ca,cb;bF.convertAttrs(b8);b9=b8.nodeName.toLowerCase();b_=b7.querySelector("[ws-attr="+b9+"]");if(o.Equals(b_,null))b0.warn("Filling non-existent attr hole",b9);else{b_.removeAttribute("ws-attr");for(b$=0,ca=b8.attributes.length-1;b$<=ca;b$++){cb=b8.attributes.item(b$);cb.name==="class"&&b_.hasAttribute("class")?b_.setAttribute("class",b_.getAttribute("class")+" "+cb.nodeValue):b_.setAttribute(cb.name,cb.nodeValue);}}};bF.mapHoles=function(b7,b8){function b9(b_){bp.IterSelector(b7,"["+b_+"]",function(b$){var ca,cb;ca=(cb=null,[b8.TryGetValue(b$.getAttribute(b_).toLowerCase(),{get:function(){return cb;},set:function(cc){cb=cc;}}),cb]);ca[0]?b$.setAttribute(b_,ca[1]):void 0;});}b9("ws-hole");b9("ws-replace");b9("ws-attr");b9("ws-onafterrender");b9("ws-var");bp.IterSelector(b7,"[ws-on]",function(b_){b_.setAttribute("ws-on",D.concat(" ",n.map(function(b$){var ca,cb,cc;ca=D.SplitChars(b$,[":"],1);cb=(cc=null,[b8.TryGetValue(n.get(ca,1),{get:function(){return cc;},set:function(cd){cc=cd;}}),cc]);return cb[0]?n.get(ca,0)+":"+cb[1]:b$;},D.SplitChars(b_.getAttribute("ws-on"),[" "],1))));});bp.IterSelector(b7,"[ws-attr-holes]",function(b_){var b$,ca,cb;b$=D.SplitChars(b_.getAttribute("ws-attr-holes"),[" "],1);for(ca=0,cb=b$.length-1;ca<=cb;ca++)(function(){var cc;function cd(ce,cf){var cg;cg=l.KeyValue(cf);return ce.replace(new a.RegExp("\\${"+cg[0]+"}","ig"),"${"+cg[1]+"}");}cc=n.get(b$,ca);return b_.setAttribute(cc,(((b3.Curried3(y.fold))(cd))(b_.getAttribute(cc)))(b8));}());});};bF.fill=function(b7,b8,b9){while(true)if(b7.hasChildNodes())b9=b8.insertBefore(b7.lastChild,b9);else return null;};bF.convertAttrs=function(b7){var b9,b_,b$,ca,cb,cc,cd,ce;function b8(cf){var cg;cg=b7.getAttribute(cf);cg===null?void 0:b7.setAttribute(cf,cg.toLowerCase());}b9=b7.attributes;b_=[];b$=[];ca=[];for(cb=0,cc=b9.length-1;cb<=cc;cb++){cd=b9.item(cb);D.StartsWith(cd.nodeName,"ws-on")&&cd.nodeName!=="ws-onafterrender"&&cd.nodeName!=="ws-on"?(b_.push(cd.nodeName),b$.push(C.string(cd.nodeName,{$:1,$0:"ws-on".length},null)+":"+cd.nodeValue.toLowerCase())):!D.StartsWith(cd.nodeName,"ws-")&&(new a.RegExp(bd.TextHoleRE())).test(cd.nodeValue)?(cd.nodeValue=(ce=new a.RegExp(bd.TextHoleRE(),"g"),cd.nodeValue.replace(ce,function(cf,cg){return"${"+cg.toLowerCase()+"}";})),ca.push(cd.nodeName)):void 0;}!(b$.length==0)?b7.setAttribute("ws-on",D.concat(" ",b$)):void 0;!(ca.length==0)?b7.setAttribute("ws-attr-holes",D.concat(" ",ca)):void 0;b8("ws-hole");b8("ws-replace");b8("ws-attr");b8("ws-onafterrender");b8("ws-var");n.iter(function(cf){b7.removeAttribute(cf);},b_);};bG=q.KeyCollection=b3.Class({GetEnumerator$1:function(){return _5.Get(y.map(function(b7){return b7.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},p,bG);bG.New=b3.Ctor(function(b7){p.New.call(this);this.d=b7;},bG);bI.New=function(b7,b8){return{PreviousNodes:b7,Top:b8};};bJ.get_Empty=function(){return{$:0,$0:new bt.New$3()};};bJ.FindAll=function(b7){var b8;function b9(b$){if(b$!=null&&b$.$==0){b9(b$.$0);b9(b$.$1);}else if(b$!=null&&b$.$==1)b_(b$.$0);else if(b$!=null&&b$.$==2)b9(b$.$0.Current);else if(b$!=null&&b$.$==6)n.iter(b_,b$.$0.Holes);}function b_(b$){b8.push(b$);b9(b$.Children);}b8=[];b9(b7);return{$:0,$0:new bt.New$2(b8)};};bJ.Filter=function(b7,b8){return{$:0,$0:bT.Filter(b7,b8.$0)};};bJ.Except=function(b7,b8){return{$:0,$0:bT.Except(b7.$0,b8.$0)};};bJ.ToArray=function(b7){return bT.ToArray(b7.$0);};bJ.Intersect=function(b7,b8){return{$:0,$0:bT.Intersect(b7.$0,b8.$0)};};bK.UseAnimations=function(){bQ.$cctor();return bQ.UseAnimations;};bK.Actions=function(b7){return bK.ConcatActions(n.choose(function(b8){return b8.$==1?{$:1,$0:b8.$0}:null;},bR.ToArray(b7.$0)));};bK.Finalize=function(b7){n.iter(function(b8){if(b8.$==0)b8.$0();},bR.ToArray(b7.$0));};bK.ConcatActions=function(b7){var b8,b9,b_,b$;b8=ba.ofSeqNonCopying(b7);b9=n.length(b8);return b9===0?bK.Const():b9===1?n.get(b8,0):(b_=y.max(y.map(function(ca){return ca.Duration;},b8)),(b$=n.map(function(ca){return bK.Prolong(b_,ca);},b8),bK.Def(b_,function(ca){n.iter(function(cb){cb.Compute(ca);},b$);})));};bK.List=function(b7){return b7.$0;};bK.Const=function(b7){return bK.Def(0,function(){return b7;});};bK.Def=function(b7,b8){return{Compute:b8,Duration:b7};};bK.Prolong=function(b7,b8){var b9,b_,b$;b9=b8.Compute;b_=b8.Duration;b$=bW.Create(function(){return b8.Compute(b8.Duration);});return{Compute:function(ca){return ca>=b_?b$.f():b9(ca);},Duration:b7};};bL.$cctor=function(){bL.$cctor=a.ignore;bL.BatchUpdatesEnabled=true;};bM=k.FormatException=b3.Class({},V,bM);bM.New$1=b3.Ctor(function(b7){this.message=b7;T.setPrototypeOf(this,bM.prototype);},bM);bN=t.Updates=b3.Class({},null,bN);bN.Create=function(b7){var b8;b8=null;b8=bN.New(b7,null,function(){var b9;b9=b8.s;return b9===null?(b9=Z.Copy(b8.c()),b8.s=b9,Z.WhenObsoleteRun(b9,function(){b8.s=null;}),b9):b9;});return b8;};bN.New=function(b7,b8,b9){return new bN({c:b7,s:b8,v:b9});};bO=t.DynamicAttrNode=b3.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b7){return bz.get_Empty();},NGetEnterAnim:function(b7){return bz.get_Empty();},NGetChangeAnim:function(b7){return bz.get_Empty();},NSync:function(b7){if(this.dirty){(this.push(b7))(this.value);this.dirty=false;}}},p,bO);bO.New=b3.Ctor(function(b7,b8){var b9;b9=this;p.New.call(this);this.push=b8;this.value=void 0;this.dirty=false;this.updates=w.Map(function(b_){b9.value=b_;b9.dirty=true;},b7);},bO);bP.Clear=function(b7){b7.splice(0,n.length(b7));};bQ.$cctor=function(){bQ.$cctor=a.ignore;bQ.CubicInOut=bS.Custom(function(b7){var b8;b8=b7*b7;return 3*b8-2*(b8*b7);});bQ.UseAnimations=true;};bR.Append=function(b7,b8){return b7.$==0?b8:b8.$==0?b7:{$:2,$0:b7,$1:b8};};bR.ToArray=function(b7){var b8;function b9(b_){if(b_.$==1)b8.push(b_.$0);else if(b_.$==2){b9(b_.$0);b9(b_.$1);}else if(b_.$==3)n.iter(function(b$){b8.push(b$);},b_.$0);}b8=[];b9(b7);return b8.slice(0);};bR.Concat=function(b7){var b8;b8=ba.ofSeqNonCopying(b7);return ba.TreeReduce(bR.Empty(),bR.Append,b8);};bR.Empty=function(){bX.$cctor();return bX.Empty;};bS=t.Easing=b3.Class({},p,bS);bS.Custom=function(b7){return new bS.New(b7);};bS.New=b3.Ctor(function(b7){p.New.call(this);this.transformTime=b7;},bS);bT.Filter=function(b7,b8){return new bt.New$2(n.filter(b7,bT.ToArray(b8)));};bT.Except=function(b7,b8){var b9;b9=new bt.New$2(bT.ToArray(b8));b9.ExceptWith(bT.ToArray(b7));return b9;};bT.ToArray=function(b7){var b8;b8=n.create(b7.get_Count(),void 0);b7.CopyTo(b8);return b8;};bT.Intersect=function(b7,b8){var b9;b9=new bt.New$2(bT.ToArray(b7));b9.IntersectWith(bT.ToArray(b8));return b9;};bU.concat=function(b7){var b8,b9;b8=[];for(var b_ in b7)b8.push.apply(b8,b7[b_]);return b8;};bV.Children=function(b7,b8){var b9,b_,b$;if(b8!=null&&b8.$==1){b$=[];b9=b8.$0[0].nextSibling;while(b9!==b8.$0[1]){b$.push(b9);b9=b9.nextSibling;}return{$:0,$0:b$};}else return{$:0,$0:n.init(b7.childNodes.length,(b_=b7.childNodes,function(ca){return b_[ca];}))};};bV.Except=function(b7,b8){var b9;b9=b7.$0;return{$:0,$0:n.filter(function(b_){return n.forall(function(b$){return!(b_===b$);},b9);},b8.$0)};};bV.Iter=function(b7,b8){n.iter(b7,b8.$0);};bV.DocChildren=function(b7){var b8;function b9(b_){if(b_!=null&&b_.$==2)b9(b_.$0.Current);else if(b_!=null&&b_.$==1)b8.push(b_.$0.El);else if(b_==null);else if(b_!=null&&b_.$==5)b8.push(b_.$0);else if(b_!=null&&b_.$==4)b8.push(b_.$0.Text);else if(b_!=null&&b_.$==6)n.iter(function(b$){if(b$==null||b$.constructor===T)b9(b$);else b8.push(b$);},b_.$0.Els);else{b9(b_.$0);b9(b_.$1);}}b8=[];b9(b7.Children);return{$:0,$0:ba.ofSeqNonCopying(b8)};};bW.Create=function(b7){return bZ.New(false,b7,bW.forceLazy);};bW.forceLazy=function(){var b7;b7=this.v();this.c=true;this.v=b7;this.f=bW.cachedLazy;return b7;};bW.cachedLazy=function(){return this.v;};bX.$cctor=function(){bX.$cctor=a.ignore;bX.Empty={$:0};};bZ.New=function(b7,b8,b9){return{c:b7,v:b8,f:b9};};b3.OnLoad(function(){j.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
//# sourceMappingURL=testing.min.map
